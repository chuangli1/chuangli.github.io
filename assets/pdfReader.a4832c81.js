var Xt=Object.defineProperty;var Yt=(et,u,V)=>u in et?Xt(et,u,{enumerable:!0,configurable:!0,writable:!0,value:V}):et[u]=V;var jt=(et,u,V)=>(Yt(et,typeof u!="symbol"?u+"":u,V),V),Gt=(et,u,V)=>{if(!u.has(et))throw TypeError("Cannot "+V)};var pt=(et,u,V)=>(Gt(et,u,"read from private field"),V?V.call(et):u.get(et)),Tt=(et,u,V)=>{if(u.has(et))throw TypeError("Cannot add the same private member more than once");u instanceof WeakSet?u.add(et):u.set(et,V)},kt=(et,u,V,o)=>(Gt(et,u,"write to private field"),o?o.call(et,V):u.set(et,V),V);var Dt=(et,u,V)=>(Gt(et,u,"access private method"),V);import{g as getAugmentedNamespace,c as commonjsGlobal,a as commonjsRequire}from"./_commonjsHelpers.a5007c1f.js";import{_ as _export_sfc}from"./index.eef6619a.js";import{d as defineComponent,t as toRefs,w as watch,i as onMounted,o as openBlock,a as createElementBlock,J as pushScopeId,K as popScopeId,b as createBaseVNode}from"./vendor.6f35fcad.js";var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(u,V){module.exports=V()})(commonjsGlobal,function(){return(()=>{var __webpack_modules__=[,(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.UNSUPPORTED_FEATURES=u.TextRenderingMode=u.StreamType=u.RenderingIntentFlag=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.IsLittleEndianCached=u.IsEvalSupportedCached=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FontType=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.AnnotationType=u.AnnotationStateModelType=u.AnnotationReviewState=u.AnnotationReplyType=u.AnnotationMode=u.AnnotationMarkedState=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.arrayByteLength=q,u.arraysToBytes=K,u.assert=f,u.bytesToString=D,u.createPromiseCapability=$t,u.createValidAbsoluteUrl=c,u.escapeString=mt,u.getModificationDate=zt,u.getVerbosityLevel=B,u.info=z,u.isArrayBuffer=Pt,u.isArrayEqual=Ut,u.isAscii=vt,u.isSameOrigin=s,u.objectFromMap=tt,u.objectSize=nt,u.setVerbosityLevel=G,u.shadow=m,u.string32=Q,u.stringToBytes=N,u.stringToPDFString=Ct,u.stringToUTF16BEString=At,u.stringToUTF8String=St,u.unreachable=X,u.utf8StringToString=ft,u.warn=Y,V(2);const o=[1,0,0,1,0,0];u.IDENTITY_MATRIX=o;const J=[.001,0,0,.001,0,0];u.FONT_IDENTITY_MATRIX=J;const H={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};u.RenderingIntentFlag=H;const Z={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};u.AnnotationMode=Z;const M={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};u.PermissionFlag=M;const r={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};u.TextRenderingMode=r;const l={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};u.ImageKind=l;const i={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};u.AnnotationType=i;const p={MARKED:"Marked",REVIEW:"Review"};u.AnnotationStateModelType=p;const g={MARKED:"Marked",UNMARKED:"Unmarked"};u.AnnotationMarkedState=g;const b={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};u.AnnotationReviewState=b;const F={GROUP:"Group",REPLY:"R"};u.AnnotationReplyType=F;const w={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};u.AnnotationFlag=w;const _={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};u.AnnotationFieldFlag=_;const W={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};u.AnnotationBorderStyleType=W;const I={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};u.AnnotationActionEventType=I;const k={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};u.DocumentActionEventType=k;const R={O:"PageOpen",C:"PageClose"};u.PageActionEventType=R;const n={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};u.StreamType=n;const a={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};u.FontType=a;const v={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=v;const P={NONE:0,BINARY:1,STREAM:2};u.CMapCompressionType=P;const A={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};u.OPS=A;const O={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};u.UNSUPPORTED_FEATURES=O;const T={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};u.PasswordResponses=T;let L=v.WARNINGS;function G($){Number.isInteger($)&&(L=$)}function B(){return L}function z($){L>=v.INFOS&&console.log(`Info: ${$}`)}function Y($){L>=v.WARNINGS&&console.log(`Warning: ${$}`)}function X($){throw new Error($)}function f($,j){$||X(j)}function s($,j){let U;try{if(U=new URL($),!U.origin||U.origin==="null")return!1}catch{return!1}const rt=new URL(j,U);return U.origin===rt.origin}function e($){if(!$)return!1;switch($.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function c($,j=null,U=null){if(!$)return null;try{if(U&&typeof $=="string"){if(U.addDefaultProtocol&&$.startsWith("www.")){const at=$.match(/\./g);at&&at.length>=2&&($=`http://${$}`)}if(U.tryConvertEncoding)try{$=St($)}catch{}}const rt=j?new URL($,j):new URL($);if(e(rt))return rt}catch{}return null}function m($,j,U){return Object.defineProperty($,j,{value:U,enumerable:!0,configurable:!0,writable:!1}),U}const y=function(){function j(U,rt){this.constructor===j&&X("Cannot initialize BaseException."),this.message=U,this.name=rt}return j.prototype=new Error,j.constructor=j,j}();u.BaseException=y;class C extends y{constructor(j,U){super(j,"PasswordException");this.code=U}}u.PasswordException=C;class t extends y{constructor(j,U){super(j,"UnknownErrorException");this.details=U}}u.UnknownErrorException=t;class h extends y{constructor(j){super(j,"InvalidPDFException")}}u.InvalidPDFException=h;class S extends y{constructor(j){super(j,"MissingPDFException")}}u.MissingPDFException=S;class x extends y{constructor(j,U){super(j,"UnexpectedResponseException");this.status=U}}u.UnexpectedResponseException=x;class d extends y{constructor(j){super(j,"FormatError")}}u.FormatError=d;class E extends y{constructor(j){super(j,"AbortException")}}u.AbortException=E;function D($){(typeof $!="object"||$===null||$.length===void 0)&&X("Invalid argument for bytesToString");const j=$.length,U=8192;if(j<U)return String.fromCharCode.apply(null,$);const rt=[];for(let at=0;at<j;at+=U){const ht=Math.min(at+U,j),dt=$.subarray(at,ht);rt.push(String.fromCharCode.apply(null,dt))}return rt.join("")}function N($){typeof $!="string"&&X("Invalid argument for stringToBytes");const j=$.length,U=new Uint8Array(j);for(let rt=0;rt<j;++rt)U[rt]=$.charCodeAt(rt)&255;return U}function q($){if($.length!==void 0)return $.length;if($.byteLength!==void 0)return $.byteLength;X("Invalid argument for arrayByteLength")}function K($){const j=$.length;if(j===1&&$[0]instanceof Uint8Array)return $[0];let U=0;for(let ht=0;ht<j;ht++)U+=q($[ht]);let rt=0;const at=new Uint8Array(U);for(let ht=0;ht<j;ht++){let dt=$[ht];dt instanceof Uint8Array||(typeof dt=="string"?dt=N(dt):dt=new Uint8Array(dt));const xt=dt.byteLength;at.set(dt,rt),rt+=xt}return at}function Q($){return String.fromCharCode($>>24&255,$>>16&255,$>>8&255,$&255)}function nt($){return Object.keys($).length}function tt($){const j=Object.create(null);for(const[U,rt]of $)j[U]=rt;return j}function st(){const $=new Uint8Array(4);return $[0]=1,new Uint32Array($.buffer,0,1)[0]===1}const ct={get value(){return m(this,"value",st())}};u.IsLittleEndianCached=ct;function it(){try{return new Function(""),!0}catch{return!1}}const ot={get value(){return m(this,"value",it())}};u.IsEvalSupportedCached=ot;const lt=[...Array(256).keys()].map($=>$.toString(16).padStart(2,"0"));class ut{static makeHexColor(j,U,rt){return`#${lt[j]}${lt[U]}${lt[rt]}`}static transform(j,U){return[j[0]*U[0]+j[2]*U[1],j[1]*U[0]+j[3]*U[1],j[0]*U[2]+j[2]*U[3],j[1]*U[2]+j[3]*U[3],j[0]*U[4]+j[2]*U[5]+j[4],j[1]*U[4]+j[3]*U[5]+j[5]]}static applyTransform(j,U){const rt=j[0]*U[0]+j[1]*U[2]+U[4],at=j[0]*U[1]+j[1]*U[3]+U[5];return[rt,at]}static applyInverseTransform(j,U){const rt=U[0]*U[3]-U[1]*U[2],at=(j[0]*U[3]-j[1]*U[2]+U[2]*U[5]-U[4]*U[3])/rt,ht=(-j[0]*U[1]+j[1]*U[0]+U[4]*U[1]-U[5]*U[0])/rt;return[at,ht]}static getAxialAlignedBoundingBox(j,U){const rt=ut.applyTransform(j,U),at=ut.applyTransform(j.slice(2,4),U),ht=ut.applyTransform([j[0],j[3]],U),dt=ut.applyTransform([j[2],j[1]],U);return[Math.min(rt[0],at[0],ht[0],dt[0]),Math.min(rt[1],at[1],ht[1],dt[1]),Math.max(rt[0],at[0],ht[0],dt[0]),Math.max(rt[1],at[1],ht[1],dt[1])]}static inverseTransform(j){const U=j[0]*j[3]-j[1]*j[2];return[j[3]/U,-j[1]/U,-j[2]/U,j[0]/U,(j[2]*j[5]-j[4]*j[3])/U,(j[4]*j[1]-j[5]*j[0])/U]}static apply3dTransform(j,U){return[j[0]*U[0]+j[1]*U[1]+j[2]*U[2],j[3]*U[0]+j[4]*U[1]+j[5]*U[2],j[6]*U[0]+j[7]*U[1]+j[8]*U[2]]}static singularValueDecompose2dScale(j){const U=[j[0],j[2],j[1],j[3]],rt=j[0]*U[0]+j[1]*U[2],at=j[0]*U[1]+j[1]*U[3],ht=j[2]*U[0]+j[3]*U[2],dt=j[2]*U[1]+j[3]*U[3],xt=(rt+dt)/2,wt=Math.sqrt((rt+dt)**2-4*(rt*dt-ht*at))/2,Rt=xt+wt||1,bt=xt-wt||1;return[Math.sqrt(Rt),Math.sqrt(bt)]}static normalizeRect(j){const U=j.slice(0);return j[0]>j[2]&&(U[0]=j[2],U[2]=j[0]),j[1]>j[3]&&(U[1]=j[3],U[3]=j[1]),U}static intersect(j,U){function rt(xt,wt){return xt-wt}const at=[j[0],j[2],U[0],U[2]].sort(rt),ht=[j[1],j[3],U[1],U[3]].sort(rt),dt=[];if(j=ut.normalizeRect(j),U=ut.normalizeRect(U),at[0]===j[0]&&at[1]===U[0]||at[0]===U[0]&&at[1]===j[0])dt[0]=at[1],dt[2]=at[2];else return null;if(ht[0]===j[1]&&ht[1]===U[1]||ht[0]===U[1]&&ht[1]===j[1])dt[1]=ht[1],dt[3]=ht[2];else return null;return dt}static bezierBoundingBox(j,U,rt,at,ht,dt,xt,wt){const Rt=[],bt=[[],[]];let Ft,Et,Lt,gt,It,Nt,Bt,qt;for(let Wt=0;Wt<2;++Wt){if(Wt===0?(Et=6*j-12*rt+6*ht,Ft=-3*j+9*rt-9*ht+3*xt,Lt=3*rt-3*j):(Et=6*U-12*at+6*dt,Ft=-3*U+9*at-9*dt+3*wt,Lt=3*at-3*U),Math.abs(Ft)<1e-12){if(Math.abs(Et)<1e-12)continue;gt=-Lt/Et,0<gt&&gt<1&&Rt.push(gt);continue}Bt=Et*Et-4*Lt*Ft,qt=Math.sqrt(Bt),!(Bt<0)&&(It=(-Et+qt)/(2*Ft),0<It&&It<1&&Rt.push(It),Nt=(-Et-qt)/(2*Ft),0<Nt&&Nt<1&&Rt.push(Nt))}let Mt=Rt.length,yt;const Ot=Mt;for(;Mt--;)gt=Rt[Mt],yt=1-gt,bt[0][Mt]=yt*yt*yt*j+3*yt*yt*gt*rt+3*yt*gt*gt*ht+gt*gt*gt*xt,bt[1][Mt]=yt*yt*yt*U+3*yt*yt*gt*at+3*yt*gt*gt*dt+gt*gt*gt*wt;return bt[0][Ot]=j,bt[1][Ot]=U,bt[0][Ot+1]=xt,bt[1][Ot+1]=wt,bt[0].length=bt[1].length=Ot+2,[Math.min(...bt[0]),Math.min(...bt[1]),Math.max(...bt[0]),Math.max(...bt[1])]}}u.Util=ut;const _t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ct($){if($[0]>="\xEF"){let U;if($[0]==="\xFE"&&$[1]==="\xFF"?U="utf-16be":$[0]==="\xFF"&&$[1]==="\xFE"?U="utf-16le":$[0]==="\xEF"&&$[1]==="\xBB"&&$[2]==="\xBF"&&(U="utf-8"),U)try{const rt=new TextDecoder(U,{fatal:!0}),at=N($);return rt.decode(at)}catch(rt){Y(`stringToPDFString: "${rt}".`)}}const j=[];for(let U=0,rt=$.length;U<rt;U++){const at=_t[$.charCodeAt(U)];j.push(at?String.fromCharCode(at):$.charAt(U))}return j.join("")}function mt($){return $.replace(/([()\\\n\r])/g,j=>j===`
`?"\\n":j==="\r"?"\\r":`\\${j}`)}function vt($){return/^[\x00-\x7F]*$/.test($)}function At($){const j=["\xFE\xFF"];for(let U=0,rt=$.length;U<rt;U++){const at=$.charCodeAt(U);j.push(String.fromCharCode(at>>8&255),String.fromCharCode(at&255))}return j.join("")}function St($){return decodeURIComponent(escape($))}function ft($){return unescape(encodeURIComponent($))}function Pt($){return typeof $=="object"&&$!==null&&$.byteLength!==void 0}function Ut($,j){if($.length!==j.length)return!1;for(let U=0,rt=$.length;U<rt;U++)if($[U]!==j[U])return!1;return!0}function zt($=new Date){return[$.getUTCFullYear().toString(),($.getUTCMonth()+1).toString().padStart(2,"0"),$.getUTCDate().toString().padStart(2,"0"),$.getUTCHours().toString().padStart(2,"0"),$.getUTCMinutes().toString().padStart(2,"0"),$.getUTCSeconds().toString().padStart(2,"0")].join("")}function $t(){const $=Object.create(null);let j=!1;return Object.defineProperty($,"settled",{get(){return j}}),$.promise=new Promise(function(U,rt){$.resolve=function(at){j=!0,U(at)},$.reject=function(at){j=!0,rt(at)}}),$}},(et,u,V)=>{V(3)},(et,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isNodeJS=void 0;const V=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");u.isNodeJS=V},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var et,u,V,o,J,H,Ht;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16),_xfa_text=__w_pdfjs_require__(17);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(M){createPDFNetworkStream=M}function getDocument(M){const r=new PDFDocumentLoadingTask;let l;if(typeof M=="string"||M instanceof URL)l={url:M};else if((0,_util.isArrayBuffer)(M))l={data:M};else if(M instanceof PDFDataRangeTransport)l={range:M};else{if(typeof M!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!M.url&&!M.data&&!M.range)throw new Error("Invalid parameter object: need either .data, .range or .url");l=M}const i=Object.create(null);let p=null,g=null;for(const F in l){const w=l[F];switch(F){case"url":if(typeof window<"u")try{i[F]=new URL(w,window.location).href;continue}catch(_){(0,_util.warn)(`Cannot create valid URL: "${_}".`)}else if(typeof w=="string"||w instanceof URL){i[F]=w.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":p=w;continue;case"worker":g=w;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&w instanceof Buffer)i[F]=new Uint8Array(w);else{if(w instanceof Uint8Array)break;if(typeof w=="string")i[F]=(0,_util.stringToBytes)(w);else if(typeof w=="object"&&w!==null&&!isNaN(w.length))i[F]=new Uint8Array(w);else if((0,_util.isArrayBuffer)(w))i[F]=new Uint8Array(w);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}i[F]=w}if(i.rangeChunkSize=i.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,i.CMapReaderFactory=i.CMapReaderFactory||DefaultCMapReaderFactory,i.StandardFontDataFactory=i.StandardFontDataFactory||DefaultStandardFontDataFactory,i.ignoreErrors=i.stopAtErrors!==!0,i.fontExtraProperties=i.fontExtraProperties===!0,i.pdfBug=i.pdfBug===!0,i.enableXfa=i.enableXfa===!0,(typeof i.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(i.docBaseUrl))&&(i.docBaseUrl=null),Number.isInteger(i.maxImageSize)||(i.maxImageSize=-1),typeof i.useWorkerFetch!="boolean"&&(i.useWorkerFetch=i.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&i.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof i.isEvalSupported!="boolean"&&(i.isEvalSupported=!0),typeof i.disableFontFace!="boolean"&&(i.disableFontFace=_is_node.isNodeJS),typeof i.useSystemFonts!="boolean"&&(i.useSystemFonts=!_is_node.isNodeJS&&!i.disableFontFace),typeof i.ownerDocument>"u"&&(i.ownerDocument=globalThis.document),typeof i.disableRange!="boolean"&&(i.disableRange=!1),typeof i.disableStream!="boolean"&&(i.disableStream=!1),typeof i.disableAutoFetch!="boolean"&&(i.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(i.verbosity),!g){const F={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};g=F.port?_PDFWorker.fromPort(F):new _PDFWorker(F),r._worker=g}const b=r.docId;return g.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const F=_fetchDocument(g,i,p,b),w=new Promise(function(_){let W;p?W=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,contentDispositionFilename:i.contentDispositionFilename,disableRange:i.disableRange,disableStream:i.disableStream},p):i.data||(W=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream})),_(W)});return Promise.all([F,w]).then(function([_,W]){if(r.destroyed)throw new Error("Loading aborted");const I=new _message_handler.MessageHandler(b,_,g.port),k=new WorkerTransport(I,r,W,i);r._transport=k,I.send("Ready",null)})}).catch(r._capability.reject),r}async function _fetchDocument(M,r,l,i){if(M.destroyed)throw new Error("Worker was destroyed");l&&(r.length=l.length,r.initialData=l.initialData,r.progressiveDone=l.progressiveDone,r.contentDispositionFilename=l.contentDispositionFilename);const p=await M.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.13.216",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties,enableXfa:r.enableXfa,useSystemFonts:r.useSystemFonts,cMapUrl:r.useWorkerFetch?r.cMapUrl:null,standardFontDataUrl:r.useWorkerFetch?r.standardFontDataUrl:null});if(M.destroyed)throw new Error("Worker was destroyed");return p}class PDFDocumentLoadingTask{static get idCounters(){return(0,_util.shadow)(this,"idCounters",{doc:0})}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.idCounters.doc++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(r,l,i=!1,p=null){this.length=r,this.initialData=l,this.progressiveDone=i,this.contentDispositionFilename=p,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,l){for(const i of this._rangeListeners)i(r,l)}onDataProgress(r,l){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(r,l)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const l of this._progressiveReadListeners)l(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,l){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,l){this._pdfInfo=r,this._transport=l,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,l,i,p,g=!1){this._pageIndex=r,this._pageInfo=l,this._ownerDocument=p,this._transport=i,this._stats=g?new _display_utils.StatTimer:null,this._pdfBug=g,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:l=this.rotate,offsetX:i=0,offsetY:p=0,dontFlip:g=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:l,offsetX:i,offsetY:p,dontFlip:g})}getAnnotations({intent:r="display"}={}){const l=this._transport.getRenderingIntent(r);let i=this._annotationPromises.get(l.cacheKey);return i||(i=this._transport.getAnnotations(this._pageIndex,l.renderingIntent),this._annotationPromises.set(l.cacheKey,i),i=i.then(p=>{for(const g of p)g.titleObj!==void 0&&Object.defineProperty(g,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),g.titleObj.str}}),g.contentsObj!==void 0&&Object.defineProperty(g,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),g.contentsObj.str}});return p})),i}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:r,viewport:l,intent:i="display",annotationMode:p=_util.AnnotationMode.ENABLE,transform:g=null,imageLayer:b=null,canvasFactory:F=null,background:w=null,optionalContentConfigPromise:_=null,annotationCanvasMap:W=null}){arguments[0]?.renderInteractiveForms!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&p===_util.AnnotationMode.ENABLE&&(p=_util.AnnotationMode.ENABLE_FORMS)),arguments[0]?.includeAnnotationStorage!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&p===_util.AnnotationMode.ENABLE&&(p=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const I=this._transport.getRenderingIntent(i,p);this.pendingCleanup=!1,_||(_=this._transport.getOptionalContentConfig());let k=this._intentStates.get(I.cacheKey);k||(k=Object.create(null),this._intentStates.set(I.cacheKey,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const R=F||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),n=!!(I.renderingIntent&_util.RenderingIntentFlag.PRINT);k.displayReadyCapability||(k.displayReadyCapability=(0,_util.createPromiseCapability)(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(I));const a=A=>{k.renderTasks.delete(v),(this.cleanupAfterRender||n)&&(this.pendingCleanup=!0),this._tryCleanup(),A?(v.capability.reject(A),this._abortOperatorList({intentState:k,reason:A instanceof Error?A:new Error(A)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},v=new InternalRenderTask({callback:a,params:{canvasContext:r,viewport:l,transform:g,imageLayer:b,background:w},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:W,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:R,useRequestAnimationFrame:!n,pdfBug:this._pdfBug});(k.renderTasks||(k.renderTasks=new Set)).add(v);const P=v.task;return Promise.all([k.displayReadyCapability.promise,_]).then(([A,O])=>{if(this.pendingCleanup){a();return}this._stats&&this._stats.time("Rendering"),v.initializeGraphics({transparency:A,optionalContentConfig:O}),v.operatorListChanged()}).catch(a),P}getOperatorList({intent:r="display",annotationMode:l=_util.AnnotationMode.ENABLE}={}){function i(){g.operatorList.lastChunk&&(g.opListReadCapability.resolve(g.operatorList),g.renderTasks.delete(b))}const p=this._transport.getRenderingIntent(r,l,!0);let g=this._intentStates.get(p.cacheKey);g||(g=Object.create(null),this._intentStates.set(p.cacheKey,g));let b;return g.opListReadCapability||(b=Object.create(null),b.operatorListChanged=i,g.opListReadCapability=(0,_util.createPromiseCapability)(),(g.renderTasks||(g.renderTasks=new Set)).add(b),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(p)),g.opListReadCapability.promise}streamTextContent({disableCombineTextItems:r=!1,includeMarkedContent:l=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:r!==!0,includeMarkedContent:l===!0},{highWaterMark:100,size(p){return p.items.length}})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const l=this.streamTextContent(r);return new Promise(function(i,p){function g(){b.read().then(function({value:w,done:_}){if(_){i(F);return}Object.assign(F.styles,w.styles),F.items.push(...w.items),g()},p)}const b=l.getReader(),F={items:[],styles:Object.create(null)};g()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const r=[];for(const l of this._intentStates.values())if(this._abortOperatorList({intentState:l,reason:new Error("Page was destroyed."),force:!0}),!l.opListReadCapability)for(const i of l.renderTasks)r.push(i.completed),i.cancel();return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(r)}cleanup(r=!1){return this.pendingCleanup=!0,this._tryCleanup(r)}_tryCleanup(r=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:l,operatorList:i}of this._intentStates.values())if(l.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(r,l){const i=this._intentStates.get(l);!i||(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(r))}_renderPageChunk(r,l){for(let i=0,p=r.length;i<p;i++)l.operatorList.fnArray.push(r.fnArray[i]),l.operatorList.argsArray.push(r.argsArray[i]);l.operatorList.lastChunk=r.lastChunk;for(const i of l.renderTasks)i.operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:r,cacheKey:l}){const p=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:l,annotationStorage:r&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),g=this._intentStates.get(l);g.streamReader=p;const b=()=>{p.read().then(({value:F,done:w})=>{if(w){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(F,g),b())},F=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const w of g.renderTasks)w.operatorListChanged();this._tryCleanup()}if(g.displayReadyCapability)g.displayReadyCapability.reject(F);else if(g.opListReadCapability)g.opListReadCapability.reject(F);else throw F}})};b()}_abortOperatorList({intentState:r,reason:l,force:i=!1}){if(!!r.streamReader){if(!i){if(r.renderTasks.size>0)return;if(l instanceof _display_utils.RenderingCancelledException){r.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:r,reason:l,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(r.streamReader.cancel(new _util.AbortException(l.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(const[p,g]of this._intentStates)if(g===r){this._intentStates.delete(p);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(r,l){const i={data:structuredClone(r,l)};this._deferred.then(()=>{for(const p of this._listeners)p.call(this,i)})}addEventListener(r,l){this._listeners.push(l)}removeEventListener(r,l){const i=this._listeners.indexOf(l);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const M=document?.currentScript?.src;M&&(PDFWorkerUtil.fallbackWorkerSrc=M.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(M){const r=`importScripts("${M}");`;return URL.createObjectURL(new Blob([r]))}}class _PDFWorker{static get _workerPorts(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}constructor({name:M=null,port:r=null,verbosity:l=(0,_util.getVerbosityLevel)()}={}){if(r&&_PDFWorker._workerPorts.has(r))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=M,this.destroyed=!1,this.verbosity=l,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,r){_PDFWorker._workerPorts.set(r,this),this._initializeFromPort(r);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(M){this._port=M,this._messageHandler=new _message_handler.MessageHandler("main","worker",M),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let M=_PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,M)||(M=PDFWorkerUtil.createCDNWrapper(new URL(M,window.location).href));const r=new Worker(M),l=new _message_handler.MessageHandler("main","worker",r),i=()=>{r.removeEventListener("error",p),l.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},p=()=>{this._webWorker||i()};r.addEventListener("error",p),l.on("test",b=>{if(r.removeEventListener("error",p),this.destroyed){i();return}b?(this._messageHandler=l,this._port=r,this._webWorker=r,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),l.destroy(),r.terminate())}),l.on("ready",b=>{if(r.removeEventListener("error",p),this.destroyed){i();return}try{g()}catch{this._setupFakeWorker()}});const g=()=>{const b=new Uint8Array([255]);try{l.send("test",b,[b.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),b[0]=0,l.send("test",b)}};g();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(M=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const r=new LoopbackPort;this._port=r;const l=`fake${PDFWorkerUtil.fakeWorkerId++}`,i=new _message_handler.MessageHandler(l+"_worker",l,r);M.setup(i,r);const p=new _message_handler.MessageHandler(l,l+"_worker",r);this._messageHandler=p,this._readyCapability.resolve(),p.send("configure",{verbosity:this.verbosity})}).catch(M=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${M.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(M){if(!M?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(M.port)?this._workerPorts.get(M.port):new _PDFWorker(M)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(r,l,i,p){Tt(this,et,null);Tt(this,u,new Map);Tt(this,V,new Map);Tt(this,o,null);this.messageHandler=r,this.loadingTask=l,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:l.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:p.ownerDocument,styleElement:p.styleElement}),this._params=p,p.useWorkerFetch||(this.CMapReaderFactory=new p.CMapReaderFactory({baseUrl:p.cMapUrl,isCompressed:p.cMapPacked}),this.StandardFontDataFactory=new p.StandardFontDataFactory({baseUrl:p.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return pt(this,et)}getRenderingIntent(r,l=_util.AnnotationMode.ENABLE,i=!1){let p=_util.RenderingIntentFlag.DISPLAY,g="";switch(r){case"any":p=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":p=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(l){case _util.AnnotationMode.DISABLE:p+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:p+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:p+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,g=this.annotationStorage.lastModified;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${l}`)}return i&&(p+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:p,cacheKey:`${p}_${g}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];for(const i of pt(this,u).values())r.push(i._destroy());pt(this,u).clear(),pt(this,V).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const l=this.messageHandler.sendWithPromise("Terminate",null);return r.push(l),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),kt(this,o,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:l}=this;r.on("GetReader",(i,p)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=g=>{this._lastProgress={loaded:g.loaded,total:g.total}},p.onPull=()=>{this._fullReader.read().then(function({value:g,done:b}){if(b){p.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(g),"GetReader - expected an ArrayBuffer."),p.enqueue(new Uint8Array(g),1,[g])}).catch(g=>{p.error(g)})},p.onCancel=g=>{this._fullReader.cancel(g),p.ready.catch(b=>{if(!this.destroyed)throw b})}}),r.on("ReaderHeadersReady",i=>{const p=(0,_util.createPromiseCapability)(),g=this._fullReader;return g.headersReady.then(()=>{(!g.isStreamingSupported||!g.isRangeSupported)&&(this._lastProgress&&l.onProgress?.(this._lastProgress),g.onProgress=b=>{l.onProgress?.({loaded:b.loaded,total:b.total})}),p.resolve({isStreamingSupported:g.isStreamingSupported,isRangeSupported:g.isRangeSupported,contentLength:g.contentLength})},p.reject),p.promise}),r.on("GetRangeReader",(i,p)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const g=this._networkStream.getRangeReader(i.begin,i.end);if(!g){p.close();return}p.onPull=()=>{g.read().then(function({value:b,done:F}){if(F){p.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(b),"GetRangeReader - expected an ArrayBuffer."),p.enqueue(new Uint8Array(b),1,[b])}).catch(b=>{p.error(b)})},p.onCancel=b=>{g.cancel(b),p.ready.catch(F=>{if(!this.destroyed)throw F})}}),r.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,l._capability.resolve(new PDFDocumentProxy(i,this))}),r.on("DocException",function(i){let p;switch(i.name){case"PasswordException":p=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":p=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":p=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":p=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":p=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}l._capability.reject(p)}),r.on("PasswordRequest",i=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),l.onPassword){const p=g=>{g instanceof Error?this._passwordCapability.reject(g):this._passwordCapability.resolve({password:g})};try{l.onPassword(p,i.code)}catch(g){this._passwordCapability.reject(g)}}else this._passwordCapability.reject(new _util.PasswordException(i.message,i.code));return this._passwordCapability.promise}),r.on("DataLoaded",i=>{l.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),r.on("StartRenderPage",i=>{if(this.destroyed)return;pt(this,u).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),r.on("commonobj",([i,p,g])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(p){case"Font":const b=this._params;if("error"in g){const _=g.error;(0,_util.warn)(`Error during font loading: ${_}`),this.commonObjs.resolve(i,_);break}let F=null;b.pdfBug&&globalThis.FontInspector?.enabled&&(F={registerFont(_,W){globalThis.FontInspector.fontAdded(_,W)}});const w=new _font_loader.FontFaceObject(g,{isEvalSupported:b.isEvalSupported,disableFontFace:b.disableFontFace,ignoreErrors:b.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:F});this.fontLoader.bind(w).catch(_=>r.sendWithPromise("FontFallback",{id:i})).finally(()=>{!b.fontExtraProperties&&w.data&&(w.data=null),this.commonObjs.resolve(i,w)});break;case"FontPath":case"Image":this.commonObjs.resolve(i,g);break;default:throw new Error(`Got unknown common object type ${p}`)}}),r.on("obj",([i,p,g,b])=>{if(this.destroyed)return;const F=pt(this,u).get(p);if(!F.objs.has(i))switch(g){case"Image":F.objs.resolve(i,b);const w=8e6;b?.data?.length>w&&(F.cleanupAfterRender=!0);break;case"Pattern":F.objs.resolve(i,b);break;default:throw new Error(`Got unknown object type ${g}`)}}),r.on("DocProgress",i=>{this.destroyed||l.onProgress?.({loaded:i.loaded,total:i.total})}),r.on("DocStats",i=>{this.destroyed||kt(this,et,Object.freeze({streamTypes:Object.freeze(i.streamTypes),fontTypes:Object.freeze(i.fontTypes)}))}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:r}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));const l=r-1,i=pt(this,V).get(l);if(i)return i;const p=this.messageHandler.sendWithPromise("GetPage",{pageIndex:l}).then(g=>{if(this.destroyed)throw new Error("Transport destroyed");const b=new PDFPageProxy(l,g,this,this._params.ownerDocument,this._params.pdfBug);return pt(this,u).set(l,b),b});return pt(this,V).set(l,p),p}getPageIndex(r){return typeof r!="object"||r===null||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}getAnnotations(r,l){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:l})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return pt(this,o)||kt(this,o,this.messageHandler.sendWithPromise("GetMetadata",null).then(r=>({info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(r=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const l of pt(this,u).values())if(!l.cleanup())throw new Error(`startCleanup: Page ${l.pageNumber} is currently rendering.`);this.commonObjs.clear(),r||this.fontLoader.clear(),kt(this,o,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const r=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r.disableAutoFetch,enableXfa:r.enableXfa})}}et=new WeakMap,u=new WeakMap,V=new WeakMap,o=new WeakMap;class PDFObjects{constructor(){Tt(this,H);Tt(this,J,Object.create(null))}get(r,l=null){if(l){const p=Dt(this,H,Ht).call(this,r);return p.capability.promise.then(()=>l(p.data)),null}const i=pt(this,J)[r];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${r}.`);return i.data}has(r){return pt(this,J)[r]?.capability.settled||!1}resolve(r,l=null){const i=Dt(this,H,Ht).call(this,r);i.data=l,i.capability.resolve()}clear(){kt(this,J,Object.create(null))}}J=new WeakMap,H=new WeakSet,Ht=function(r){const l=pt(this,J)[r];return l||(pt(this,J)[r]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(r){this._internalRenderTask=r,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static get canvasInUse(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}constructor({callback:r,params:l,objs:i,commonObjs:p,annotationCanvasMap:g,operatorList:b,pageIndex:F,canvasFactory:w,useRequestAnimationFrame:_=!1,pdfBug:W=!1}){this.callback=r,this.params=l,this.objs=i,this.commonObjs=p,this.annotationCanvasMap=g,this.operatorListIdx=null,this.operatorList=b,this._pageIndex=F,this.canvasFactory=w,this._pdfBug=W,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=_===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=l.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:l}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:p,transform:g,imageLayer:b,background:F}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,b,l,this.annotationCanvasMap),this.gfx.beginDrawing({transform:g,viewport:p,transparency:r,background:F}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(r=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback())))}}const version="2.13.216";exports.version=version;const build="399a0ec60";exports.build=build},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=void 0,u.deprecated=n,u.getFilenameFromUrl=_,u.getPdfFilenameFromUrl=W,u.getXfaPageViewport=P,u.isDataScheme=F,u.isPdfFile=w,u.isValidFetchUrl=k,u.loadScript=R;var o=V(6),J=V(1);const H="http://www.w3.org/2000/svg",A=class{};let Z=A;jt(Z,"CSS",96),jt(Z,"PDF",72),jt(Z,"PDF_TO_CSS_UNITS",A.CSS/A.PDF),u.PixelsPerInch=Z;class M extends o.BaseCanvasFactory{constructor({ownerDocument:T=globalThis.document}={}){super();this._document=T}_createCanvas(T,L){const G=this._document.createElement("canvas");return G.width=T,G.height=L,G}}u.DOMCanvasFactory=M;async function r(O,T=!1){if(k(O,document.baseURI)){const L=await fetch(O);if(!L.ok)throw new Error(L.statusText);return T?new Uint8Array(await L.arrayBuffer()):(0,J.stringToBytes)(await L.text())}return new Promise((L,G)=>{const B=new XMLHttpRequest;B.open("GET",O,!0),T&&(B.responseType="arraybuffer"),B.onreadystatechange=()=>{if(B.readyState===XMLHttpRequest.DONE){if(B.status===200||B.status===0){let z;if(T&&B.response?z=new Uint8Array(B.response):!T&&B.responseText&&(z=(0,J.stringToBytes)(B.responseText)),z){L(z);return}}G(new Error(B.statusText))}},B.send(null)})}class l extends o.BaseCMapReaderFactory{_fetchData(T,L){return r(T,this.isCompressed).then(G=>({cMapData:G,compressionType:L}))}}u.DOMCMapReaderFactory=l;class i extends o.BaseStandardFontDataFactory{_fetchData(T){return r(T,!0)}}u.DOMStandardFontDataFactory=i;class p extends o.BaseSVGFactory{_createSVG(T){return document.createElementNS(H,T)}}u.DOMSVGFactory=p;class g{constructor({viewBox:T,scale:L,rotation:G,offsetX:B=0,offsetY:z=0,dontFlip:Y=!1}){this.viewBox=T,this.scale=L,this.rotation=G,this.offsetX=B,this.offsetY=z;const X=(T[2]+T[0])/2,f=(T[3]+T[1])/2;let s,e,c,m;switch(G%=360,G<0&&(G+=360),G){case 180:s=-1,e=0,c=0,m=1;break;case 90:s=0,e=1,c=1,m=0;break;case 270:s=0,e=-1,c=-1,m=0;break;case 0:s=1,e=0,c=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Y&&(c=-c,m=-m);let y,C,t,h;s===0?(y=Math.abs(f-T[1])*L+B,C=Math.abs(X-T[0])*L+z,t=Math.abs(T[3]-T[1])*L,h=Math.abs(T[2]-T[0])*L):(y=Math.abs(X-T[0])*L+B,C=Math.abs(f-T[1])*L+z,t=Math.abs(T[2]-T[0])*L,h=Math.abs(T[3]-T[1])*L),this.transform=[s*L,e*L,c*L,m*L,y-s*L*X-c*L*f,C-e*L*X-m*L*f],this.width=t,this.height=h}clone({scale:T=this.scale,rotation:L=this.rotation,offsetX:G=this.offsetX,offsetY:B=this.offsetY,dontFlip:z=!1}={}){return new g({viewBox:this.viewBox.slice(),scale:T,rotation:L,offsetX:G,offsetY:B,dontFlip:z})}convertToViewportPoint(T,L){return J.Util.applyTransform([T,L],this.transform)}convertToViewportRectangle(T){const L=J.Util.applyTransform([T[0],T[1]],this.transform),G=J.Util.applyTransform([T[2],T[3]],this.transform);return[L[0],L[1],G[0],G[1]]}convertToPdfPoint(T,L){return J.Util.applyInverseTransform([T,L],this.transform)}}u.PageViewport=g;class b extends J.BaseException{constructor(T,L){super(T,"RenderingCancelledException");this.type=L}}u.RenderingCancelledException=b;function F(O){const T=O.length;let L=0;for(;L<T&&O[L].trim()==="";)L++;return O.substring(L,L+5).toLowerCase()==="data:"}function w(O){return typeof O=="string"&&/\.pdf$/i.test(O)}function _(O){const T=O.indexOf("#"),L=O.indexOf("?"),G=Math.min(T>0?T:O.length,L>0?L:O.length);return O.substring(O.lastIndexOf("/",G)+1,G)}function W(O,T="document.pdf"){if(typeof O!="string")return T;if(F(O))return(0,J.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),T;const L=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,G=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,B=L.exec(O);let z=G.exec(B[1])||G.exec(B[2])||G.exec(B[3]);if(z&&(z=z[0],z.includes("%")))try{z=G.exec(decodeURIComponent(z))[0]}catch{}return z||T}class I{constructor(){this.started=Object.create(null),this.times=[]}time(T){T in this.started&&(0,J.warn)(`Timer is already running for ${T}`),this.started[T]=Date.now()}timeEnd(T){T in this.started||(0,J.warn)(`Timer has not been started for ${T}`),this.times.push({name:T,start:this.started[T],end:Date.now()}),delete this.started[T]}toString(){const T=[];let L=0;for(const G of this.times){const B=G.name;B.length>L&&(L=B.length)}for(const G of this.times){const B=G.end-G.start;T.push(`${G.name.padEnd(L)} ${B}ms
`)}return T.join("")}}u.StatTimer=I;function k(O,T){try{const{protocol:L}=T?new URL(O,T):new URL(O);return L==="http:"||L==="https:"}catch{return!1}}function R(O,T=!1){return new Promise((L,G)=>{const B=document.createElement("script");B.src=O,B.onload=function(z){T&&B.remove(),L(z)},B.onerror=function(){G(new Error(`Cannot load script at: ${B.src}`))},(document.head||document.documentElement).appendChild(B)})}function n(O){console.log("Deprecated API usage: "+O)}let a;class v{static toDateObject(T){if(!T||typeof T!="string")return null;a||(a=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const L=a.exec(T);if(!L)return null;const G=parseInt(L[1],10);let B=parseInt(L[2],10);B=B>=1&&B<=12?B-1:0;let z=parseInt(L[3],10);z=z>=1&&z<=31?z:1;let Y=parseInt(L[4],10);Y=Y>=0&&Y<=23?Y:0;let X=parseInt(L[5],10);X=X>=0&&X<=59?X:0;let f=parseInt(L[6],10);f=f>=0&&f<=59?f:0;const s=L[7]||"Z";let e=parseInt(L[8],10);e=e>=0&&e<=23?e:0;let c=parseInt(L[9],10)||0;return c=c>=0&&c<=59?c:0,s==="-"?(Y+=e,X+=c):s==="+"&&(Y-=e,X-=c),new Date(Date.UTC(G,B,z,Y,X,f))}}u.PDFDateString=v;function P(O,{scale:T=1,rotation:L=0}){const{width:G,height:B}=O.attributes.style,z=[0,0,parseInt(G),parseInt(B)];return new g({viewBox:z,scale:T,rotation:L})}},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var o=V(1);class J{constructor(){this.constructor===J&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(l,i){if(l<=0||i<=0)throw new Error("Invalid canvas size");const p=this._createCanvas(l,i);return{canvas:p,context:p.getContext("2d")}}reset(l,i,p){if(!l.canvas)throw new Error("Canvas is not specified");if(i<=0||p<=0)throw new Error("Invalid canvas size");l.canvas.width=i,l.canvas.height=p}destroy(l){if(!l.canvas)throw new Error("Canvas is not specified");l.canvas.width=0,l.canvas.height=0,l.canvas=null,l.context=null}_createCanvas(l,i){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=J;class H{constructor({baseUrl:l=null,isCompressed:i=!1}){this.constructor===H&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=l,this.isCompressed=i}async fetch({name:l}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!l)throw new Error("CMap name must be specified.");const i=this.baseUrl+l+(this.isCompressed?".bcmap":""),p=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(i,p).catch(g=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}_fetchData(l,i){(0,o.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=H;class Z{constructor({baseUrl:l=null}){this.constructor===Z&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=l}async fetch({filename:l}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!l)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${l}`;return this._fetchData(i).catch(p=>{throw new Error(`Unable to load font data at: ${i}`)})}_fetchData(l){(0,o.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=Z;class M{constructor(){this.constructor===M&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(l,i){if(l<=0||i<=0)throw new Error("Invalid SVG dimensions");const p=this._createSVG("svg:svg");return p.setAttribute("version","1.1"),p.setAttribute("width",`${l}px`),p.setAttribute("height",`${i}px`),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("viewBox",`0 0 ${l} ${i}`),p}createElement(l){if(typeof l!="string")throw new Error("Invalid SVG element type");return this._createSVG(l)}_createSVG(l){(0,o.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=M},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var o=V(1);class J{constructor({docId:r,onUnsupportedFeature:l,ownerDocument:i=globalThis.document,styleElement:p=null}){this.constructor===J&&(0,o.unreachable)("Cannot initialize BaseFontLoader."),this.docId=r,this._onUnsupportedFeature=l,this._document=i,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(r){this.nativeFontFaces.push(r),this._document.fonts.add(r)}insertRule(r){let l=this.styleElement;l||(l=this.styleElement=this._document.createElement("style"),l.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(l));const i=l.sheet;i.insertRule(r,i.cssRules.length)}clear(){for(const r of this.nativeFontFaces)this._document.fonts.delete(r);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(r){if(r.attached||r.missingFile)return;if(r.attached=!0,this.isFontLoadingAPISupported){const i=r.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(p){throw this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,o.warn)(`Failed to load font '${i.family}': '${p}'.`),r.disableFontFace=!0,p}}return}const l=r.createFontFaceRule();if(l){if(this.insertRule(l),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const p=this._queueLoadingCallback(i);this._prepareFontLoadEvent([l],[r],p)})}}_queueLoadingCallback(r){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const r=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",r)}get isSyncFontLoadingSupported(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(r,l,i){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let H;u.FontLoader=H,u.FontLoader=H=class extends J{constructor(r){super(r);this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let r=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(r=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",r)}_queueLoadingCallback(r){function l(){for((0,o.assert)(!p.done,"completeRequest() cannot be called twice."),p.done=!0;i.requests.length>0&&i.requests[0].done;){const g=i.requests.shift();setTimeout(g.callback,0)}}const i=this.loadingContext,p={id:`pdfjs-font-loading-${i.nextRequestId++}`,done:!1,complete:l,callback:r};return i.requests.push(p),p}get _loadTestFont(){const r=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,o.shadow)(this,"_loadTestFont",r())}_prepareFontLoadEvent(r,l,i){function p(G,B){return G.charCodeAt(B)<<24|G.charCodeAt(B+1)<<16|G.charCodeAt(B+2)<<8|G.charCodeAt(B+3)&255}function g(G,B,z,Y){const X=G.substring(0,B),f=G.substring(B+z);return X+Y+f}let b,F;const w=this._document.createElement("canvas");w.width=1,w.height=1;const _=w.getContext("2d");let W=0;function I(G,B){if(W++,W>30){(0,o.warn)("Load test font never loaded."),B();return}if(_.font="30px "+G,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(I.bind(null,G,B))}const k=`lt${Date.now()}${this.loadTestFontId++}`;let R=this._loadTestFont;R=g(R,976,k.length,k);const a=16,v=1482184792;let P=p(R,a);for(b=0,F=k.length-3;b<F;b+=4)P=P-v+p(k,b)|0;b<k.length&&(P=P-v+p(k+"XXX",b)|0),R=g(R,a,4,(0,o.string32)(P));const A=`url(data:font/opentype;base64,${btoa(R)});`,O=`@font-face {font-family:"${k}";src:${A}}`;this.insertRule(O);const T=[];for(const G of l)T.push(G.loadedName);T.push(k);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const G of T){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=G,L.appendChild(B)}this._document.body.appendChild(L),I(k,()=>{L.remove(),i.complete()})}};class Z{constructor(r,{isEvalSupported:l=!0,disableFontFace:i=!1,ignoreErrors:p=!1,onUnsupportedFeature:g,fontRegistry:b=null}){this.compiledGlyphs=Object.create(null);for(const F in r)this[F]=r[F];this.isEvalSupported=l!==!1,this.disableFontFace=i===!0,this.ignoreErrors=p===!0,this._onUnsupportedFeature=g,this.fontRegistry=b}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let r;if(!this.cssFontInfo)r=new FontFace(this.loadedName,this.data,{});else{const l={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(l.style=`oblique ${this.cssFontInfo.italicAngle}deg`),r=new FontFace(this.cssFontInfo.fontFamily,this.data,l)}return this.fontRegistry&&this.fontRegistry.registerFont(this),r}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const r=(0,o.bytesToString)(this.data),l=`url(data:${this.mimetype};base64,${btoa(r)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${l}}`;else{let p=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(p+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${p}src:${l}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,l),i}getPathGenerator(r,l){if(this.compiledGlyphs[l]!==void 0)return this.compiledGlyphs[l];let i;try{i=r.get(this.loadedName+"_path_"+l)}catch(p){if(!this.ignoreErrors)throw p;return this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,o.warn)(`getPathGenerator - ignoring character: "${p}".`),this.compiledGlyphs[l]=function(g,b){}}if(this.isEvalSupported&&o.IsEvalSupportedCached.value){const p=[];for(const g of i){const b=g.args!==void 0?g.args.join(","):"";p.push("c.",g.cmd,"(",b,`);
`)}return this.compiledGlyphs[l]=new Function("c","size",p.join(""))}return this.compiledGlyphs[l]=function(p,g){for(const b of i)b.cmd==="scale"&&(b.args=[g,-g]),p[b.cmd].apply(p,b.args)}}}u.FontFaceObject=Z},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var o=V(6),J=V(3),H=V(1);let Z=class{constructor(){(0,H.unreachable)("Not implemented: NodeCanvasFactory")}};u.NodeCanvasFactory=Z;let M=class{constructor(){(0,H.unreachable)("Not implemented: NodeCMapReaderFactory")}};u.NodeCMapReaderFactory=M;let r=class{constructor(){(0,H.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(u.NodeStandardFontDataFactory=r,J.isNodeJS){const l=function(i){return new Promise((p,g)=>{require$$4.readFile(i,(F,w)=>{if(F||!w){g(new Error(F));return}p(new Uint8Array(w))})})};u.NodeCanvasFactory=Z=class extends o.BaseCanvasFactory{_createCanvas(i,p){return require$$4.createCanvas(i,p)}},u.NodeCMapReaderFactory=M=class extends o.BaseCMapReaderFactory{_fetchData(i,p){return l(i).then(g=>({cMapData:g,compressionType:p}))}},u.NodeStandardFontDataFactory=r=class extends o.BaseStandardFontDataFactory{_fetchData(i){return l(i)}}}},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationStorage=void 0;var o=V(1);class J{constructor(){this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(Z,M){const r=this._storage.get(Z);return r===void 0?M:Object.assign(M,r)}setValue(Z,M){const r=this._storage.get(Z);let l=!1;if(r!==void 0)for(const[i,p]of Object.entries(M))r[i]!==p&&(l=!0,r[i]=p);else l=!0,this._storage.set(Z,M);l&&(this._timeStamp=Date.now(),this._setModified())}getAll(){return this._storage.size>0?(0,o.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get lastModified(){return this._timeStamp.toString()}}u.AnnotationStorage=J},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var o=V(1),J=V(11),H=V(5);const Z=16,M=100,r=4096,l=15,i=10,p=1e3,g=16,b=1.000001;function F(f,s){if(f._removeMirroring)throw new Error("Context is already forwarding operations.");f.__originalSave=f.save,f.__originalRestore=f.restore,f.__originalRotate=f.rotate,f.__originalScale=f.scale,f.__originalTranslate=f.translate,f.__originalTransform=f.transform,f.__originalSetTransform=f.setTransform,f.__originalResetTransform=f.resetTransform,f.__originalClip=f.clip,f.__originalMoveTo=f.moveTo,f.__originalLineTo=f.lineTo,f.__originalBezierCurveTo=f.bezierCurveTo,f.__originalRect=f.rect,f.__originalClosePath=f.closePath,f.__originalBeginPath=f.beginPath,f._removeMirroring=()=>{f.save=f.__originalSave,f.restore=f.__originalRestore,f.rotate=f.__originalRotate,f.scale=f.__originalScale,f.translate=f.__originalTranslate,f.transform=f.__originalTransform,f.setTransform=f.__originalSetTransform,f.resetTransform=f.__originalResetTransform,f.clip=f.__originalClip,f.moveTo=f.__originalMoveTo,f.lineTo=f.__originalLineTo,f.bezierCurveTo=f.__originalBezierCurveTo,f.rect=f.__originalRect,f.closePath=f.__originalClosePath,f.beginPath=f.__originalBeginPath,delete f._removeMirroring},f.save=function(){s.save(),this.__originalSave()},f.restore=function(){s.restore(),this.__originalRestore()},f.translate=function(c,m){s.translate(c,m),this.__originalTranslate(c,m)},f.scale=function(c,m){s.scale(c,m),this.__originalScale(c,m)},f.transform=function(c,m,y,C,t,h){s.transform(c,m,y,C,t,h),this.__originalTransform(c,m,y,C,t,h)},f.setTransform=function(c,m,y,C,t,h){s.setTransform(c,m,y,C,t,h),this.__originalSetTransform(c,m,y,C,t,h)},f.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},f.rotate=function(c){s.rotate(c),this.__originalRotate(c)},f.clip=function(c){s.clip(c),this.__originalClip(c)},f.moveTo=function(e,c){s.moveTo(e,c),this.__originalMoveTo(e,c)},f.lineTo=function(e,c){s.lineTo(e,c),this.__originalLineTo(e,c)},f.bezierCurveTo=function(e,c,m,y,C,t){s.bezierCurveTo(e,c,m,y,C,t),this.__originalBezierCurveTo(e,c,m,y,C,t)},f.rect=function(e,c,m,y){s.rect(e,c,m,y),this.__originalRect(e,c,m,y)},f.closePath=function(){s.closePath(),this.__originalClosePath()},f.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}function w(f){if(f._transformStack&&(f._transformStack=[]),!f.mozCurrentTransform){f._originalSave=f.save,f._originalRestore=f.restore,f._originalRotate=f.rotate,f._originalScale=f.scale,f._originalTranslate=f.translate,f._originalTransform=f.transform,f._originalSetTransform=f.setTransform,f._originalResetTransform=f.resetTransform,f._transformMatrix=f._transformMatrix||[1,0,0,1,0,0],f._transformStack=[];try{const s=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(f),"lineWidth");f._setLineWidth=s.set,f._getLineWidth=s.get,Object.defineProperty(f,"lineWidth",{set:function(c){this._setLineWidth(c*b)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(f,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(f,"mozCurrentTransformInverse",{get:function(){const[e,c,m,y,C,t]=this._transformMatrix,h=e*y-c*m,S=c*m-e*y;return[y/h,c/S,m/S,e/h,(y*C-m*t)/S,(c*C-e*t)/h]}}),f.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},f.restore=function(){this._transformStack.length===0&&(0,o.warn)("Tried to restore a ctx when the stack was already empty.");const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},f.translate=function(e,c){const m=this._transformMatrix;m[4]=m[0]*e+m[2]*c+m[4],m[5]=m[1]*e+m[3]*c+m[5],this._originalTranslate(e,c)},f.scale=function(e,c){const m=this._transformMatrix;m[0]*=e,m[1]*=e,m[2]*=c,m[3]*=c,this._originalScale(e,c)},f.transform=function(e,c,m,y,C,t){const h=this._transformMatrix;this._transformMatrix=[h[0]*e+h[2]*c,h[1]*e+h[3]*c,h[0]*m+h[2]*y,h[1]*m+h[3]*y,h[0]*C+h[2]*t+h[4],h[1]*C+h[3]*t+h[5]],f._originalTransform(e,c,m,y,C,t)},f.setTransform=function(e,c,m,y,C,t){this._transformMatrix=[e,c,m,y,C,t],f._originalSetTransform(e,c,m,y,C,t)},f.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],f._originalResetTransform()},f.rotate=function(e){const c=Math.cos(e),m=Math.sin(e),y=this._transformMatrix;this._transformMatrix=[y[0]*c+y[2]*m,y[1]*c+y[3]*m,y[0]*-m+y[2]*c,y[1]*-m+y[3]*c,y[4],y[5]],this._originalRotate(e)}}}class _{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,e,c,m){let y;return this.cache[s]!==void 0?(y=this.cache[s],this.canvasFactory.reset(y,e,c),y.context.setTransform(1,0,0,1,0,0)):(y=this.canvasFactory.create(e,c),this.cache[s]=y),m&&w(y.context),y}clear(){for(const s in this.cache){const e=this.cache[s];this.canvasFactory.destroy(e),delete this.cache[s]}}}function W(f){const e=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=f.width,m=f.height,y=c+1;let C,t,h,S;const x=new Uint8Array(y*(m+1)),d=c+7&-8,E=f.data,D=new Uint8Array(d*m);let N=0;for(C=0,t=E.length;C<t;C++){const tt=E[C];let st=128;for(;st>0;)D[N++]=tt&st?0:255,st>>=1}let q=0;for(N=0,D[N]!==0&&(x[0]=1,++q),h=1;h<c;h++)D[N]!==D[N+1]&&(x[h]=D[N]?2:1,++q),N++;for(D[N]!==0&&(x[h]=2,++q),C=1;C<m;C++){N=C*d,S=C*y,D[N-d]!==D[N]&&(x[S]=D[N]?1:8,++q);let tt=(D[N]?4:0)+(D[N-d]?8:0);for(h=1;h<c;h++)tt=(tt>>2)+(D[N+1]?4:0)+(D[N-d+1]?8:0),e[tt]&&(x[S+h]=e[tt],++q),N++;if(D[N-d]!==D[N]&&(x[S+h]=D[N]?2:4,++q),q>1e3)return null}for(N=d*(m-1),S=C*y,D[N]!==0&&(x[S]=8,++q),h=1;h<c;h++)D[N]!==D[N+1]&&(x[S+h]=D[N]?4:8,++q),N++;if(D[N]!==0&&(x[S+h]=4,++q),q>1e3)return null;const K=new Int32Array([0,y,-1,0,-y,0,0,0,1]),Q=[];for(C=0;q&&C<=m;C++){let tt=C*y;const st=tt+c;for(;tt<st&&!x[tt];)tt++;if(tt===st)continue;const ct=[tt%y,C],it=tt;let ot=x[tt];do{const lt=K[ot];do tt+=lt;while(!x[tt]);const ut=x[tt];ut!==5&&ut!==10?(ot=ut,x[tt]=0):(ot=ut&51*ot>>4,x[tt]&=ot>>2|ot<<2),ct.push(tt%y,tt/y|0),x[tt]||--q}while(it!==tt);Q.push(ct),--C}return function(tt){tt.save(),tt.scale(1/c,-1/m),tt.translate(0,-m),tt.beginPath();for(let st=0,ct=Q.length;st<ct;st++){const it=Q[st];tt.moveTo(it[0],it[1]);for(let ot=2,lt=it.length;ot<lt;ot+=2)tt.lineTo(it[ot],it[ot+1])}tt.fill(),tt.beginPath(),tt.restore()}}class I{constructor(s,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,s,e])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,e){this.x=s,this.y=e}updatePathMinMax(s,e,c){[e,c]=o.Util.applyTransform([e,c],s),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,c),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,c)}updateCurvePathMinMax(s,e,c,m,y,C,t,h,S){const x=o.Util.bezierBoundingBox(e,c,m,y,C,t,h,S);this.updatePathMinMax(s,x[0],x[1]),this.updatePathMinMax(s,x[2],x[3])}getPathBoundingBox(s=J.PathType.FILL,e=null){const c=[this.minX,this.minY,this.maxX,this.maxY];if(s===J.PathType.STROKE){e||(0,o.unreachable)("Stroke bounding box must include transform.");const m=o.Util.singularValueDecompose2dScale(e),y=m[0]*this.lineWidth/2,C=m[1]*this.lineWidth/2;c[0]-=y,c[1]-=C,c[2]+=y,c[3]+=C}return c}updateClipFromPath(){const s=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=J.PathType.FILL,e=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(s,e))}}function k(f,s,e=null){if(typeof ImageData<"u"&&s instanceof ImageData){f.putImageData(s,0,0);return}const c=s.height,m=s.width,y=c%g,C=(c-y)/g,t=y===0?C:C+1,h=f.createImageData(m,g);let S=0,x;const d=s.data,E=h.data;let D,N,q,K,Q,nt,tt,st;if(e)switch(e.length){case 1:Q=e[0],nt=e[0],tt=e[0],st=e[0];break;case 4:Q=e[0],nt=e[1],tt=e[2],st=e[3];break}if(s.kind===o.ImageKind.GRAYSCALE_1BPP){const ct=d.byteLength,it=new Uint32Array(E.buffer,0,E.byteLength>>2),ot=it.length,lt=m+7>>3;let ut=4294967295,_t=o.IsLittleEndianCached.value?4278190080:255;for(st&&st[0]===255&&st[255]===0&&([ut,_t]=[_t,ut]),D=0;D<t;D++){for(q=D<C?g:y,x=0,N=0;N<q;N++){const Ct=ct-S;let mt=0;const vt=Ct>lt?m:Ct*8-7,At=vt&-8;let St=0,ft=0;for(;mt<At;mt+=8)ft=d[S++],it[x++]=ft&128?ut:_t,it[x++]=ft&64?ut:_t,it[x++]=ft&32?ut:_t,it[x++]=ft&16?ut:_t,it[x++]=ft&8?ut:_t,it[x++]=ft&4?ut:_t,it[x++]=ft&2?ut:_t,it[x++]=ft&1?ut:_t;for(;mt<vt;mt++)St===0&&(ft=d[S++],St=128),it[x++]=ft&St?ut:_t,St>>=1}for(;x<ot;)it[x++]=0;f.putImageData(h,0,D*g)}}else if(s.kind===o.ImageKind.RGBA_32BPP){const ct=!!(Q||nt||tt);for(N=0,K=m*g*4,D=0;D<C;D++){if(E.set(d.subarray(S,S+K)),S+=K,ct)for(let it=0;it<K;it+=4)Q&&(E[it+0]=Q[E[it+0]]),nt&&(E[it+1]=nt[E[it+1]]),tt&&(E[it+2]=tt[E[it+2]]);f.putImageData(h,0,N),N+=g}if(D<t){if(K=m*y*4,E.set(d.subarray(S,S+K)),ct)for(let it=0;it<K;it+=4)Q&&(E[it+0]=Q[E[it+0]]),nt&&(E[it+1]=nt[E[it+1]]),tt&&(E[it+2]=tt[E[it+2]]);f.putImageData(h,0,N)}}else if(s.kind===o.ImageKind.RGB_24BPP){const ct=!!(Q||nt||tt);for(q=g,K=m*q,D=0;D<t;D++){for(D>=C&&(q=y,K=m*q),x=0,N=K;N--;)E[x++]=d[S++],E[x++]=d[S++],E[x++]=d[S++],E[x++]=255;if(ct)for(let it=0;it<x;it+=4)Q&&(E[it+0]=Q[E[it+0]]),nt&&(E[it+1]=nt[E[it+1]]),tt&&(E[it+2]=tt[E[it+2]]);f.putImageData(h,0,D*g)}}else throw new Error(`bad image kind: ${s.kind}`)}function R(f,s){const e=s.height,c=s.width,m=e%g,y=(e-m)/g,C=m===0?y:y+1,t=f.createImageData(c,g);let h=0;const S=s.data,x=t.data;for(let d=0;d<C;d++){const E=d<y?g:m;let D=3;for(let N=0;N<E;N++){let q,K=0;for(let Q=0;Q<c;Q++)K||(q=S[h++],K=128),x[D]=q&K?0:255,D+=4,K>>=1}f.putImageData(t,0,d*g)}}function n(f,s){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let c=0,m=e.length;c<m;c++){const y=e[c];f[y]!==void 0&&(s[y]=f[y])}f.setLineDash!==void 0&&(s.setLineDash(f.getLineDash()),s.lineDashOffset=f.lineDashOffset)}function a(f){f.strokeStyle="#000000",f.fillStyle="#000000",f.fillRule="nonzero",f.globalAlpha=1,f.lineWidth=1,f.lineCap="butt",f.lineJoin="miter",f.miterLimit=10,f.globalCompositeOperation="source-over",f.font="10px sans-serif",f.setLineDash!==void 0&&(f.setLineDash([]),f.lineDashOffset=0)}function v(f,s,e,c){const m=f.length;for(let y=3;y<m;y+=4){const C=f[y];if(C===0)f[y-3]=s,f[y-2]=e,f[y-1]=c;else if(C<255){const t=255-C;f[y-3]=f[y-3]*C+s*t>>8,f[y-2]=f[y-2]*C+e*t>>8,f[y-1]=f[y-1]*C+c*t>>8}}}function P(f,s,e){const c=f.length,m=1/255;for(let y=3;y<c;y+=4){const C=e?e[f[y]]:f[y];s[y]=s[y]*C*m|0}}function A(f,s,e){const c=f.length;for(let m=3;m<c;m+=4){const y=f[m-3]*77+f[m-2]*152+f[m-1]*28;s[m]=e?s[m]*e[y>>8]>>8:s[m]*y>>16}}function O(f,s,e,c,m,y,C,t,h,S,x){const d=!!y,E=d?y[0]:0,D=d?y[1]:0,N=d?y[2]:0;let q;m==="Luminosity"?q=A:q=P;const Q=Math.min(c,Math.ceil(1048576/e));for(let nt=0;nt<c;nt+=Q){const tt=Math.min(Q,c-nt),st=f.getImageData(t-S,nt+(h-x),e,tt),ct=s.getImageData(t,nt+h,e,tt);d&&v(st.data,E,D,N),q(st.data,ct.data,C),s.putImageData(ct,t,nt+h)}}function T(f,s,e,c){const m=c[0],y=c[1],C=c[2]-m,t=c[3]-y;C===0||t===0||(O(s.context,e,C,t,s.subtype,s.backdrop,s.transferMap,m,y,s.offsetX,s.offsetY),f.save(),f.globalAlpha=1,f.globalCompositeOperation="source-over",f.setTransform(1,0,0,1,0,0),f.drawImage(e.canvas,0,0),f.restore())}function L(f,s){const e=o.Util.singularValueDecompose2dScale(f);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const c=Math.fround((globalThis.devicePixelRatio||1)*H.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:e[0]<=c||e[1]<=c}const G=["butt","round","square"],B=["miter","round","bevel"],z={},Y={};class X{constructor(s,e,c,m,y,C,t){this.ctx=s,this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=c,this.canvasFactory=m,this.imageLayer=y,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=C,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=t,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,s&&w(s),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:s,viewport:e,transparency:c=!1,background:m=null}){const y=this.ctx.canvas.width,C=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=m||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,y,C),this.ctx.restore(),c){const t=this.cachedCanvases.getCanvas("transparent",y,C,!0);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),a(this.ctx),s&&(this.ctx.transform.apply(this.ctx,s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform.apply(this.ctx,e.transform),this.viewportScale=e.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(s,e,c,m){const y=s.argsArray,C=s.fnArray;let t=e||0;const h=y.length;if(h===t)return t;const S=h-t>i&&typeof c=="function",x=S?Date.now()+l:0;let d=0;const E=this.commonObjs,D=this.objs;let N;for(;;){if(m!==void 0&&t===m.nextBreakPoint)return m.breakIt(t,c),t;if(N=C[t],N!==o.OPS.dependency)this[N].apply(this,y[t]);else for(const q of y[t]){const K=q.startsWith("g_")?E:D;if(!K.has(q))return K.get(q,c),t}if(t++,t===h)return t;if(S&&++d>i){if(Date.now()>x)return c(),t;d=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(s,e){const c=s.width,m=s.height;let y=Math.max(Math.hypot(e[0],e[1]),1),C=Math.max(Math.hypot(e[2],e[3]),1),t=c,h=m,S="prescale1",x,d;for(;y>2&&t>1||C>2&&h>1;){let E=t,D=h;y>2&&t>1&&(E=Math.ceil(t/2),y/=t/E),C>2&&h>1&&(D=Math.ceil(h/2),C/=h/D),x=this.cachedCanvases.getCanvas(S,E,D),d=x.context,d.clearRect(0,0,E,D),d.drawImage(s,0,0,t,h,0,0,E,D),s=x.canvas,t=E,h=D,S=S==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:t,paintHeight:h}}_createMaskCanvas(s){const e=this.ctx,c=s.width,m=s.height,y=this.current.fillColor,C=this.current.patternFill,t=this.cachedCanvases.getCanvas("maskCanvas",c,m),h=t.context;R(h,s);const S=e.mozCurrentTransform;let x=o.Util.transform(S,[1/c,0,0,-1/m,0,0]);x=o.Util.transform(x,[1,0,0,1,0,-m]);const d=o.Util.applyTransform([0,0],x),E=o.Util.applyTransform([c,m],x),D=o.Util.normalizeRect([d[0],d[1],E[0],E[1]]),N=Math.ceil(D[2]-D[0]),q=Math.ceil(D[3]-D[1]),K=this.cachedCanvases.getCanvas("fillCanvas",N,q,!0),Q=K.context,nt=Math.min(d[0],E[0]),tt=Math.min(d[1],E[1]);Q.translate(-nt,-tt),Q.transform.apply(Q,x);const st=this._scaleImage(t.canvas,Q.mozCurrentTransformInverse);Q.imageSmoothingEnabled=L(Q.mozCurrentTransform,s.interpolate),Q.drawImage(st.img,0,0,st.img.width,st.img.height,0,0,c,m),Q.globalCompositeOperation="source-in";const ct=o.Util.transform(Q.mozCurrentTransformInverse,[1,0,0,1,-nt,-tt]);return Q.fillStyle=C?y.getPattern(e,this,ct,J.PathType.FILL):y,Q.fillRect(0,0,c,m),{canvas:K.canvas,offsetX:Math.round(nt),offsetY:Math.round(tt)}}setLineWidth(s){this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=G[s]}setLineJoin(s){this.ctx.lineJoin=B[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,e){const c=this.ctx;c.setLineDash!==void 0&&(c.setLineDash(s),c.lineDashOffset=e)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(let e=0,c=s.length;e<c;e++){const m=s[e],y=m[0],C=m[1];switch(y){case"LW":this.setLineWidth(C);break;case"LC":this.setLineCap(C);break;case"LJ":this.setLineJoin(C);break;case"ML":this.setMiterLimit(C);break;case"D":this.setDash(C[0],C[1]);break;case"RI":this.setRenderingIntent(C);break;case"FL":this.setFlatness(C);break;case"Font":this.setFont(C[0],C[1]);break;case"CA":this.current.strokeAlpha=m[1];break;case"ca":this.current.fillAlpha=m[1],this.ctx.globalAlpha=m[1];break;case"BM":this.ctx.globalCompositeOperation=C;break;case"SMask":this.current.activeSMask=C?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=C}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,e=this.ctx.canvas.height,c="smaskGroupAt"+this.groupLevel,m=this.cachedCanvases.getCanvas(c,s,e,!0);this.suspendedCtx=this.ctx,this.ctx=m.context;const y=this.ctx;y.setTransform.apply(y,this.suspendedCtx.mozCurrentTransform),n(this.suspendedCtx,y),F(y,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),n(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,c=this.suspendedCtx;T(c,e,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(n(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),n(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}transform(s,e,c,m,y,C){this.ctx.transform(s,e,c,m,y,C),this._cachedGetSinglePixelWidth=null}constructPath(s,e){const c=this.ctx,m=this.current;let y=m.x,C=m.y,t,h;for(let S=0,x=0,d=s.length;S<d;S++)switch(s[S]|0){case o.OPS.rectangle:y=e[x++],C=e[x++];const E=e[x++],D=e[x++],N=y+E,q=C+D;c.moveTo(y,C),E===0||D===0?c.lineTo(N,q):(c.lineTo(N,C),c.lineTo(N,q),c.lineTo(y,q)),m.updatePathMinMax(c.mozCurrentTransform,y,C),m.updatePathMinMax(c.mozCurrentTransform,N,q),c.closePath();break;case o.OPS.moveTo:y=e[x++],C=e[x++],c.moveTo(y,C),m.updatePathMinMax(c.mozCurrentTransform,y,C);break;case o.OPS.lineTo:y=e[x++],C=e[x++],c.lineTo(y,C),m.updatePathMinMax(c.mozCurrentTransform,y,C);break;case o.OPS.curveTo:t=y,h=C,y=e[x+4],C=e[x+5],c.bezierCurveTo(e[x],e[x+1],e[x+2],e[x+3],y,C),m.updateCurvePathMinMax(c.mozCurrentTransform,t,h,e[x],e[x+1],e[x+2],e[x+3],y,C),x+=6;break;case o.OPS.curveTo2:t=y,h=C,c.bezierCurveTo(y,C,e[x],e[x+1],e[x+2],e[x+3]),m.updateCurvePathMinMax(c.mozCurrentTransform,t,h,y,C,e[x],e[x+1],e[x+2],e[x+3]),y=e[x+2],C=e[x+3],x+=4;break;case o.OPS.curveTo3:t=y,h=C,y=e[x+2],C=e[x+3],c.bezierCurveTo(e[x],e[x+1],y,C,y,C),m.updateCurvePathMinMax(c.mozCurrentTransform,t,h,e[x],e[x+1],y,C,y,C),x+=4;break;case o.OPS.closePath:c.closePath();break}m.setCurrentPoint(y,C)}closePath(){this.ctx.closePath()}stroke(s){s=typeof s<"u"?s:!0;const e=this.ctx,c=this.current.strokeColor;if(e.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof c=="object"&&c?.getPattern){const m=this.getSinglePixelWidth();e.save(),e.strokeStyle=c.getPattern(e,this,e.mozCurrentTransformInverse,J.PathType.STROKE),e.lineWidth=Math.max(m,this.current.lineWidth),e.stroke(),e.restore()}else{const m=this.getSinglePixelWidth();m<0&&-m>=this.current.lineWidth?(e.save(),e.resetTransform(),e.lineWidth=Math.floor(this._combinedScaleFactor),e.stroke(),e.restore()):(e.lineWidth=Math.max(m,this.current.lineWidth),e.stroke())}s&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s){s=typeof s<"u"?s:!0;const e=this.ctx,c=this.current.fillColor,m=this.current.patternFill;let y=!1;m&&(e.save(),e.fillStyle=c.getPattern(e,this,e.mozCurrentTransformInverse,J.PathType.FILL),y=!0);const C=this.current.getClippedPathBoundingBox();this.contentVisible&&C!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),y&&e.restore(),s&&this.consumePath(C)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=z}eoClip(){this.pendingClip=Y}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,e=this.ctx;if(s===void 0){e.beginPath();return}e.save(),e.beginPath();for(let c=0;c<s.length;c++){const m=s[c];e.setTransform.apply(e,m.transform),e.translate(m.x,m.y),m.addToPath(e,m.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,e){const c=this.commonObjs.get(s),m=this.current;if(!c)throw new Error(`Can't find font for ${s}`);if(m.fontMatrix=c.fontMatrix||o.FONT_IDENTITY_MATRIX,(m.fontMatrix[0]===0||m.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+s),e<0?(e=-e,m.fontDirection=-1):m.fontDirection=1,this.current.font=c,this.current.fontSize=e,c.isType3Font)return;const y=c.loadedName||"sans-serif";let C="normal";c.black?C="900":c.bold&&(C="bold");const t=c.italic?"italic":"normal",h=`"${y}", ${c.fallbackName}`;let S=e;e<Z?S=Z:e>M&&(S=M),this.current.fontSizeScale=e/S,this.ctx.font=`${t} ${C} ${S}px ${h}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,e){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=e}setLeadingMoveText(s,e){this.setLeading(-e),this.moveText(s,e)}setTextMatrix(s,e,c,m,y,C){this.current.textMatrix=[s,e,c,m,y,C],this.current.textMatrixScale=Math.hypot(s,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,e,c,m,y){const C=this.ctx,t=this.current,h=t.font,S=t.textRenderingMode,x=t.fontSize/t.fontSizeScale,d=S&o.TextRenderingMode.FILL_STROKE_MASK,E=!!(S&o.TextRenderingMode.ADD_TO_PATH_FLAG),D=t.patternFill&&!h.missingFile;let N;(h.disableFontFace||E||D)&&(N=h.getPathGenerator(this.commonObjs,s)),h.disableFontFace||D?(C.save(),C.translate(e,c),C.beginPath(),N(C,x),m&&C.setTransform.apply(C,m),(d===o.TextRenderingMode.FILL||d===o.TextRenderingMode.FILL_STROKE)&&C.fill(),(d===o.TextRenderingMode.STROKE||d===o.TextRenderingMode.FILL_STROKE)&&(y&&(C.resetTransform(),C.lineWidth=Math.floor(this._combinedScaleFactor)),C.stroke()),C.restore()):((d===o.TextRenderingMode.FILL||d===o.TextRenderingMode.FILL_STROKE)&&C.fillText(s,e,c),(d===o.TextRenderingMode.STROKE||d===o.TextRenderingMode.FILL_STROKE)&&(y?(C.save(),C.moveTo(e,c),C.resetTransform(),C.lineWidth=Math.floor(this._combinedScaleFactor),C.strokeText(s,0,0),C.restore()):C.strokeText(s,e,c))),E&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:C.mozCurrentTransform,x:e,y:c,fontSize:x,addToPath:N})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const e=s.getImageData(0,0,10,10).data;let c=!1;for(let m=3;m<e.length;m+=4)if(e[m]>0&&e[m]<255){c=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",c)}showText(s){const e=this.current,c=e.font;if(c.isType3Font)return this.showType3Text(s);const m=e.fontSize;if(m===0)return;const y=this.ctx,C=e.fontSizeScale,t=e.charSpacing,h=e.wordSpacing,S=e.fontDirection,x=e.textHScale*S,d=s.length,E=c.vertical,D=E?1:-1,N=c.defaultVMetrics,q=m*e.fontMatrix[0],K=e.textRenderingMode===o.TextRenderingMode.FILL&&!c.disableFontFace&&!e.patternFill;y.save(),y.transform.apply(y,e.textMatrix),y.translate(e.x,e.y+e.textRise),S>0?y.scale(x,-1):y.scale(x,1);let Q;if(e.patternFill){y.save();const ot=e.fillColor.getPattern(y,this,y.mozCurrentTransformInverse,J.PathType.FILL);Q=y.mozCurrentTransform,y.restore(),y.fillStyle=ot}let nt=e.lineWidth,tt=!1;const st=e.textMatrixScale;if(st===0||nt===0){const ot=e.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(ot===o.TextRenderingMode.STROKE||ot===o.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,nt=this.getSinglePixelWidth(),tt=nt<0)}else nt/=st;C!==1&&(y.scale(C,C),nt/=C),y.lineWidth=nt;let ct=0,it;for(it=0;it<d;++it){const ot=s[it];if(typeof ot=="number"){ct+=D*ot*m/1e3;continue}let lt=!1;const ut=(ot.isSpace?h:0)+t,_t=ot.fontChar,Ct=ot.accent;let mt,vt,At=ot.width;if(E){const ft=ot.vmetric||N,Pt=-(ot.vmetric?ft[1]:At*.5)*q,Ut=ft[2]*q;At=ft?-ft[0]:At,mt=Pt/C,vt=(ct+Ut)/C}else mt=ct/C,vt=0;if(c.remeasure&&At>0){const ft=y.measureText(_t).width*1e3/m*C;if(At<ft&&this.isFontSubpixelAAEnabled){const Pt=At/ft;lt=!0,y.save(),y.scale(Pt,1),mt/=Pt}else At!==ft&&(mt+=(At-ft)/2e3*m/C)}if(this.contentVisible&&(ot.isInFont||c.missingFile)){if(K&&!Ct)y.fillText(_t,mt,vt);else if(this.paintChar(_t,mt,vt,Q,tt),Ct){const ft=mt+m*Ct.offset.x/C,Pt=vt-m*Ct.offset.y/C;this.paintChar(Ct.fontChar,ft,Pt,Q,tt)}}let St;E?St=At*q-ut*S:St=At*q+ut*S,ct+=St,lt&&y.restore()}E?e.y-=ct:e.x+=ct*x,y.restore(),this.compose()}showType3Text(s){const e=this.ctx,c=this.current,m=c.font,y=c.fontSize,C=c.fontDirection,t=m.vertical?1:-1,h=c.charSpacing,S=c.wordSpacing,x=c.textHScale*C,d=c.fontMatrix||o.FONT_IDENTITY_MATRIX,E=s.length,D=c.textRenderingMode===o.TextRenderingMode.INVISIBLE;let N,q,K,Q;if(!(D||y===0)){for(this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,c.textMatrix),e.translate(c.x,c.y),e.scale(x,C),N=0;N<E;++N){if(q=s[N],typeof q=="number"){Q=t*q*y/1e3,this.ctx.translate(Q,0),c.x+=Q*x;continue}const nt=(q.isSpace?S:0)+h,tt=m.charProcOperatorList[q.operatorListId];if(!tt){(0,o.warn)(`Type3 character "${q.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=q,this.save(),e.scale(y,y),e.transform.apply(e,d),this.executeOperatorList(tt),this.restore()),K=o.Util.applyTransform([q.width,0],d)[0]*y+nt,e.translate(K,0),c.x+=K*x}e.restore(),this.processingType3=null}}setCharWidth(s,e){}setCharWidthAndBounds(s,e,c,m,y,C){this.ctx.rect(c,m,y-c,C-m),this.clip(),this.endPath()}getColorN_Pattern(s){let e;if(s[0]==="TilingPattern"){const c=s[1],m=this.baseTransform||this.ctx.mozCurrentTransform.slice(),y={createCanvasGraphics:C=>new X(C,this.commonObjs,this.objs,this.canvasFactory)};e=new J.TilingPattern(s,c,this.ctx,y,m)}else e=this._getPattern(s[1],s[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,e,c){const m=o.Util.makeHexColor(s,e,c);this.ctx.strokeStyle=m,this.current.strokeColor=m}setFillRGBColor(s,e,c){const m=o.Util.makeHexColor(s,e,c);this.ctx.fillStyle=m,this.current.fillColor=m,this.current.patternFill=!1}_getPattern(s,e=null){let c;return this.cachedPatterns.has(s)?c=this.cachedPatterns.get(s):(c=(0,J.getShadingPattern)(this.objs.get(s)),this.cachedPatterns.set(s,c)),e&&(c.matrix=e),c}shadingFill(s){if(!this.contentVisible)return;const e=this.ctx;this.save();const c=this._getPattern(s);e.fillStyle=c.getPattern(e,this,e.mozCurrentTransformInverse,J.PathType.SHADING);const m=e.mozCurrentTransformInverse;if(m){const y=e.canvas,C=y.width,t=y.height,h=o.Util.applyTransform([0,0],m),S=o.Util.applyTransform([0,t],m),x=o.Util.applyTransform([C,0],m),d=o.Util.applyTransform([C,t],m),E=Math.min(h[0],S[0],x[0],d[0]),D=Math.min(h[1],S[1],x[1],d[1]),N=Math.max(h[0],S[0],x[0],d[0]),q=Math.max(h[1],S[1],x[1],d[1]);this.ctx.fillRect(E,D,N-E,q-D)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,e){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform.apply(this,s),this.baseTransform=this.ctx.mozCurrentTransform,e)){const c=e[2]-e[0],m=e[3]-e[1];this.ctx.rect(e[0],e[1],c,m),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,e[0],e[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,e[2],e[3]),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;s.isolated||(0,o.info)("TODO: Support non-isolated groups."),s.knockout&&(0,o.warn)("Knockout groups not supported.");const c=e.mozCurrentTransform;if(s.matrix&&e.transform.apply(e,s.matrix),!s.bbox)throw new Error("Bounding box is required.");let m=o.Util.getAxialAlignedBoundingBox(s.bbox,e.mozCurrentTransform);const y=[0,0,e.canvas.width,e.canvas.height];m=o.Util.intersect(m,y)||[0,0,0,0];const C=Math.floor(m[0]),t=Math.floor(m[1]);let h=Math.max(Math.ceil(m[2])-C,1),S=Math.max(Math.ceil(m[3])-t,1),x=1,d=1;h>r&&(x=h/r,h=r),S>r&&(d=S/r,S=r),this.current.startNewPathAndClipBox([0,0,h,S]);let E="groupAt"+this.groupLevel;s.smask&&(E+="_smask_"+this.smaskCounter++%2);const D=this.cachedCanvases.getCanvas(E,h,S,!0),N=D.context;N.scale(1/x,1/d),N.translate(-C,-t),N.transform.apply(N,c),s.smask?this.smaskStack.push({canvas:D.canvas,context:N,offsetX:C,offsetY:t,scaleX:x,scaleY:d,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(C,t),e.scale(x,d),e.save()),n(e,N),this.ctx=N,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,c=this.groupStack.pop();if(this.ctx=c,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const m=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,m);const y=o.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],m);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(y)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(s,e,c,m,y){if(this.save(),Array.isArray(e)&&e.length===4){const C=e[2]-e[0],t=e[3]-e[1];if(y&&this.annotationCanvasMap){c=c.slice(),c[4]-=e[0],c[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=C,e[3]=t;const[h,S]=o.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:x}=this,d=Math.ceil(C*this.outputScaleX*x),E=Math.ceil(t*this.outputScaleY*x);this.annotationCanvas=this.canvasFactory.create(d,E);const{canvas:D,context:N}=this.annotationCanvas;D.style.width=`calc(${C}px * var(--viewport-scale-factor))`,D.style.height=`calc(${t}px * var(--viewport-scale-factor))`,this.annotationCanvasMap.set(s,D),this.annotationCanvas.savedCtx=this.ctx,this.ctx=N,this.ctx.setTransform(h,0,0,-S,0,t*S),w(this.ctx),a(this.ctx)}else a(this.ctx),this.ctx.rect(e[0],e[1],C,t),this.clip(),this.endPath()}this.current=new I(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,c),this.transform.apply(this,m)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(s){if(!this.contentVisible)return;const e=this.ctx,c=s.width,m=s.height,y=this.processingType3;if(y&&y.compiled===void 0&&(c<=p&&m<=p?y.compiled=W({data:s.data,width:c,height:m}):y.compiled=null),y?.compiled){y.compiled(e);return}const C=this._createMaskCanvas(s),t=C.canvas;e.save(),e.setTransform(1,0,0,1,0,0),e.drawImage(t,C.offsetX,C.offsetY),e.restore(),this.compose()}paintImageMaskXObjectRepeat(s,e,c=0,m=0,y,C){if(!this.contentVisible)return;const t=this.ctx;t.save();const h=t.mozCurrentTransform;t.transform(e,c,m,y,0,0);const S=this._createMaskCanvas(s);t.setTransform(1,0,0,1,0,0);for(let x=0,d=C.length;x<d;x+=2){const E=o.Util.transform(h,[e,c,m,y,C[x],C[x+1]]),[D,N]=o.Util.applyTransform([0,0],E);t.drawImage(S.canvas,D,N)}t.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const e=this.ctx,c=this.current.fillColor,m=this.current.patternFill;for(let y=0,C=s.length;y<C;y++){const t=s[y],h=t.width,S=t.height,x=this.cachedCanvases.getCanvas("maskCanvas",h,S),d=x.context;d.save(),R(d,t),d.globalCompositeOperation="source-in",d.fillStyle=m?c.getPattern(d,this,e.mozCurrentTransformInverse,J.PathType.FILL):c,d.fillRect(0,0,h,S),d.restore(),e.save(),e.transform.apply(e,t.transform),e.scale(1,-1),e.drawImage(x.canvas,0,0,h,S,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const e=s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s);if(!e){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(s,e,c,m){if(!this.contentVisible)return;const y=s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s);if(!y){(0,o.warn)("Dependent image isn't ready yet");return}const C=y.width,t=y.height,h=[];for(let S=0,x=m.length;S<x;S+=2)h.push({transform:[e,0,0,c,m[S],m[S+1]],x:0,y:0,w:C,h:t});this.paintInlineImageXObjectGroup(y,h)}paintInlineImageXObject(s){if(!this.contentVisible)return;const e=s.width,c=s.height,m=this.ctx;this.save(),m.scale(1/e,-1/c);let y;if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)y=s;else{const t=this.cachedCanvases.getCanvas("inlineImage",e,c),h=t.context;k(h,s,this.current.transferMaps),y=t.canvas}const C=this._scaleImage(y,m.mozCurrentTransformInverse);if(m.imageSmoothingEnabled=L(m.mozCurrentTransform,s.interpolate),m.drawImage(C.img,0,0,C.paintWidth,C.paintHeight,0,-c,e,c),this.imageLayer){const t=this.getCanvasPosition(0,-c);this.imageLayer.appendImage({imgData:s,left:t[0],top:t[1],width:e/m.mozCurrentTransformInverse[0],height:c/m.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}paintInlineImageXObjectGroup(s,e){if(!this.contentVisible)return;const c=this.ctx,m=s.width,y=s.height,C=this.cachedCanvases.getCanvas("inlineImage",m,y),t=C.context;k(t,s,this.current.transferMaps);for(let h=0,S=e.length;h<S;h++){const x=e[h];if(c.save(),c.transform.apply(c,x.transform),c.scale(1,-1),c.drawImage(C.canvas,x.x,x.y,x.w,x.h,0,-1,1,1),this.imageLayer){const d=this.getCanvasPosition(x.x,x.y);this.imageLayer.appendImage({imgData:s,left:d[0],top:d[1],width:m,height:y})}c.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,e){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,e){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const e=this.ctx;this.pendingClip&&(this.pendingClip===Y?e.clip("evenodd"):e.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),e.beginPath()}getSinglePixelWidth(){if(this._cachedGetSinglePixelWidth===null){const s=this.ctx.mozCurrentTransform,e=Math.abs(s[0]*s[3]-s[2]*s[1]),c=s[0]**2+s[2]**2,m=s[1]**2+s[3]**2,y=Math.sqrt(Math.max(c,m))/e;c!==m&&this._combinedScaleFactor*y>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*y):e>Number.EPSILON?this._cachedGetSinglePixelWidth=y:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}getCanvasPosition(s,e){const c=this.ctx.mozCurrentTransform;return[c[0]*s+c[2]*e+c[4],c[1]*s+c[3]*e+c[5]]}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}}u.CanvasGraphics=X;for(const f in o.OPS)X.prototype[f]!==void 0&&(X.prototype[o.OPS[f]]=X.prototype[f])},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=g;var o=V(1);const J={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};u.PathType=J;function H(w,_){if(!_||typeof Path2D>"u")return;const W=_[2]-_[0],I=_[3]-_[1],k=new Path2D;k.rect(_[0],_[1],W,I),w.clip(k)}class Z{constructor(){this.constructor===Z&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class M extends Z{constructor(_){super();this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let W;this._type==="axial"?W=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(W=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const I of this._colorStops)W.addColorStop(I[0],I[1]);return W}getPattern(_,W,I,k){let R;if(k===J.STROKE||k===J.FILL){const n=W.current.getClippedPathBoundingBox(k,_.mozCurrentTransform)||[0,0,0,0],a=Math.ceil(n[2]-n[0])||1,v=Math.ceil(n[3]-n[1])||1,P=W.cachedCanvases.getCanvas("pattern",a,v,!0),A=P.context;A.clearRect(0,0,A.canvas.width,A.canvas.height),A.beginPath(),A.rect(0,0,A.canvas.width,A.canvas.height),A.translate(-n[0],-n[1]),I=o.Util.transform(I,[1,0,0,1,n[0],n[1]]),A.transform.apply(A,W.baseTransform),this.matrix&&A.transform.apply(A,this.matrix),H(A,this._bbox),A.fillStyle=this._createGradient(A),A.fill(),R=_.createPattern(P.canvas,"no-repeat");const O=new DOMMatrix(I);try{R.setTransform(O)}catch(T){(0,o.warn)(`RadialAxialShadingPattern.getPattern: "${T?.message}".`)}}else H(_,this._bbox),R=this._createGradient(_);return R}}function r(w,_,W,I,k,R,n,a){const v=_.coords,P=_.colors,A=w.data,O=w.width*4;let T;v[W+1]>v[I+1]&&(T=W,W=I,I=T,T=R,R=n,n=T),v[I+1]>v[k+1]&&(T=I,I=k,k=T,T=n,n=a,a=T),v[W+1]>v[I+1]&&(T=W,W=I,I=T,T=R,R=n,n=T);const L=(v[W]+_.offsetX)*_.scaleX,G=(v[W+1]+_.offsetY)*_.scaleY,B=(v[I]+_.offsetX)*_.scaleX,z=(v[I+1]+_.offsetY)*_.scaleY,Y=(v[k]+_.offsetX)*_.scaleX,X=(v[k+1]+_.offsetY)*_.scaleY;if(G>=X)return;const f=P[R],s=P[R+1],e=P[R+2],c=P[n],m=P[n+1],y=P[n+2],C=P[a],t=P[a+1],h=P[a+2],S=Math.round(G),x=Math.round(X);let d,E,D,N,q,K,Q,nt;for(let tt=S;tt<=x;tt++){if(tt<z){let lt;tt<G?lt=0:lt=(G-tt)/(G-z),d=L-(L-B)*lt,E=f-(f-c)*lt,D=s-(s-m)*lt,N=e-(e-y)*lt}else{let lt;tt>X?lt=1:z===X?lt=0:lt=(z-tt)/(z-X),d=B-(B-Y)*lt,E=c-(c-C)*lt,D=m-(m-t)*lt,N=y-(y-h)*lt}let st;tt<G?st=0:tt>X?st=1:st=(G-tt)/(G-X),q=L-(L-Y)*st,K=f-(f-C)*st,Q=s-(s-t)*st,nt=e-(e-h)*st;const ct=Math.round(Math.min(d,q)),it=Math.round(Math.max(d,q));let ot=O*tt+ct*4;for(let lt=ct;lt<=it;lt++)st=(d-lt)/(d-q),st<0?st=0:st>1&&(st=1),A[ot++]=E-(E-K)*st|0,A[ot++]=D-(D-Q)*st|0,A[ot++]=N-(N-nt)*st|0,A[ot++]=255}}function l(w,_,W){const I=_.coords,k=_.colors;let R,n;switch(_.type){case"lattice":const a=_.verticesPerRow,v=Math.floor(I.length/a)-1,P=a-1;for(R=0;R<v;R++){let A=R*a;for(let O=0;O<P;O++,A++)r(w,W,I[A],I[A+1],I[A+a],k[A],k[A+1],k[A+a]),r(w,W,I[A+a+1],I[A+1],I[A+a],k[A+a+1],k[A+1],k[A+a])}break;case"triangles":for(R=0,n=I.length;R<n;R+=3)r(w,W,I[R],I[R+1],I[R+2],k[R],k[R+1],k[R+2]);break;default:throw new Error("illegal figure")}}class i extends Z{constructor(_){super();this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,W,I){const a=Math.floor(this._bounds[0]),v=Math.floor(this._bounds[1]),P=Math.ceil(this._bounds[2])-a,A=Math.ceil(this._bounds[3])-v,O=Math.min(Math.ceil(Math.abs(P*_[0]*1.1)),3e3),T=Math.min(Math.ceil(Math.abs(A*_[1]*1.1)),3e3),L=P/O,G=A/T,B={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-v,scaleX:1/L,scaleY:1/G},z=O+2*2,Y=T+2*2,X=I.getCanvas("mesh",z,Y,!1),f=X.context,s=f.createImageData(O,T);if(W){const c=s.data;for(let m=0,y=c.length;m<y;m+=4)c[m]=W[0],c[m+1]=W[1],c[m+2]=W[2],c[m+3]=255}for(const c of this._figures)l(s,c,B);return f.putImageData(s,2,2),{canvas:X.canvas,offsetX:a-2*L,offsetY:v-2*G,scaleX:L,scaleY:G}}getPattern(_,W,I,k){H(_,this._bbox);let R;if(k===J.SHADING)R=o.Util.singularValueDecompose2dScale(_.mozCurrentTransform);else if(R=o.Util.singularValueDecompose2dScale(W.baseTransform),this.matrix){const a=o.Util.singularValueDecompose2dScale(this.matrix);R=[R[0]*a[0],R[1]*a[1]]}const n=this._createMeshCanvas(R,k===J.SHADING?null:this._background,W.cachedCanvases);return k!==J.SHADING&&(_.setTransform.apply(_,W.baseTransform),this.matrix&&_.transform.apply(_,this.matrix)),_.translate(n.offsetX,n.offsetY),_.scale(n.scaleX,n.scaleY),_.createPattern(n.canvas,"no-repeat")}}class p extends Z{getPattern(){return"hotpink"}}function g(w){switch(w[0]){case"RadialAxial":return new M(w);case"Mesh":return new i(w);case"Dummy":return new p}throw new Error(`Unknown IR type: ${w[0]}`)}const b={COLORED:1,UNCOLORED:2};class F{static get MAX_PATTERN_SIZE(){return(0,o.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(_,W,I,k,R){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=W,this.ctx=I,this.canvasGraphicsFactory=k,this.baseTransform=R}createPatternCanvas(_){const W=this.operatorList,I=this.bbox,k=this.xstep,R=this.ystep,n=this.paintType,a=this.tilingType,v=this.color,P=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+a);const A=I[0],O=I[1],T=I[2],L=I[3],G=o.Util.singularValueDecompose2dScale(this.matrix),B=o.Util.singularValueDecompose2dScale(this.baseTransform),z=[G[0]*B[0],G[1]*B[1]],Y=this.getSizeAndScale(k,this.ctx.canvas.width,z[0]),X=this.getSizeAndScale(R,this.ctx.canvas.height,z[1]),f=_.cachedCanvases.getCanvas("pattern",Y.size,X.size,!0),s=f.context,e=P.createCanvasGraphics(s);e.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(e,n,v);let c=A,m=O,y=T,C=L;return A<0&&(c=0,y+=Math.abs(A)),O<0&&(m=0,C+=Math.abs(O)),s.translate(-(Y.scale*c),-(X.scale*m)),e.transform(Y.scale,0,0,X.scale,0,0),s.save(),this.clipBbox(e,c,m,y,C),e.baseTransform=e.ctx.mozCurrentTransform.slice(),e.executeOperatorList(W),e.endDrawing(),{canvas:f.canvas,scaleX:Y.scale,scaleY:X.scale,offsetX:c,offsetY:m}}getSizeAndScale(_,W,I){_=Math.abs(_);const k=Math.max(F.MAX_PATTERN_SIZE,W);let R=Math.ceil(_*I);return R>=k?R=k:I=R/_,{scale:I,size:R}}clipBbox(_,W,I,k,R){const n=k-W,a=R-I;_.ctx.rect(W,I,n,a),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,W,I){const k=_.ctx,R=_.current;switch(W){case b.COLORED:const n=this.ctx;k.fillStyle=n.fillStyle,k.strokeStyle=n.strokeStyle,R.fillColor=n.fillStyle,R.strokeColor=n.strokeStyle;break;case b.UNCOLORED:const a=o.Util.makeHexColor(I[0],I[1],I[2]);k.fillStyle=a,k.strokeStyle=a,R.fillColor=a,R.strokeColor=a;break;default:throw new o.FormatError(`Unsupported paint type: ${W}`)}}getPattern(_,W,I,k){let R=I;k!==J.SHADING&&(R=o.Util.transform(R,W.baseTransform),this.matrix&&(R=o.Util.transform(R,this.matrix)));const n=this.createPatternCanvas(W);let a=new DOMMatrix(R);a=a.translate(n.offsetX,n.offsetY),a=a.scale(1/n.scaleX,1/n.scaleY);const v=_.createPattern(n.canvas,"repeat");try{v.setTransform(a)}catch(P){(0,o.warn)(`TilingPattern.getPattern: "${P?.message}".`)}return v}}u.TilingPattern=F},(et,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const V=Object.create(null);u.GlobalWorkerOptions=V,V.workerPort=V.workerPort===void 0?null:V.workerPort,V.workerSrc=V.workerSrc===void 0?"":V.workerSrc},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var o=V(1);const J={UNKNOWN:0,DATA:1,ERROR:2},H={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Z(r){switch(r instanceof Error||typeof r=="object"&&r!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new o.AbortException(r.message);case"MissingPDFException":return new o.MissingPDFException(r.message);case"PasswordException":return new o.PasswordException(r.message,r.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(r.message,r.status);case"UnknownErrorException":return new o.UnknownErrorException(r.message,r.details);default:return new o.UnknownErrorException(r.message,r.toString())}}class M{constructor(l,i,p){this.sourceName=l,this.targetName=i,this.comObj=p,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=g=>{const b=g.data;if(b.targetName!==this.sourceName)return;if(b.stream){this._processStreamMessage(b);return}if(b.callback){const w=b.callbackId,_=this.callbackCapabilities[w];if(!_)throw new Error(`Cannot resolve callback ${w}`);if(delete this.callbackCapabilities[w],b.callback===J.DATA)_.resolve(b.data);else if(b.callback===J.ERROR)_.reject(Z(b.reason));else throw new Error("Unexpected callback case");return}const F=this.actionHandler[b.action];if(!F)throw new Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){const w=this.sourceName,_=b.sourceName;new Promise(function(W){W(F(b.data))}).then(function(W){p.postMessage({sourceName:w,targetName:_,callback:J.DATA,callbackId:b.callbackId,data:W})},function(W){p.postMessage({sourceName:w,targetName:_,callback:J.ERROR,callbackId:b.callbackId,reason:Z(W)})});return}if(b.streamId){this._createStreamSink(b);return}F(b.data)},p.addEventListener("message",this._onComObjOnMessage)}on(l,i){const p=this.actionHandler;if(p[l])throw new Error(`There is already an actionName called "${l}"`);p[l]=i}send(l,i,p){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:l,data:i},p)}sendWithPromise(l,i,p){const g=this.callbackId++,b=(0,o.createPromiseCapability)();this.callbackCapabilities[g]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:l,callbackId:g,data:i},p)}catch(F){b.reject(F)}return b.promise}sendWithStream(l,i,p,g){const b=this.streamId++,F=this.sourceName,w=this.targetName,_=this.comObj;return new ReadableStream({start:W=>{const I=(0,o.createPromiseCapability)();return this.streamControllers[b]={controller:W,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:F,targetName:w,action:l,streamId:b,data:i,desiredSize:W.desiredSize},g),I.promise},pull:W=>{const I=(0,o.createPromiseCapability)();return this.streamControllers[b].pullCall=I,_.postMessage({sourceName:F,targetName:w,stream:H.PULL,streamId:b,desiredSize:W.desiredSize}),I.promise},cancel:W=>{(0,o.assert)(W instanceof Error,"cancel must have a valid reason");const I=(0,o.createPromiseCapability)();return this.streamControllers[b].cancelCall=I,this.streamControllers[b].isClosed=!0,_.postMessage({sourceName:F,targetName:w,stream:H.CANCEL,streamId:b,reason:Z(W)}),I.promise}},p)}_createStreamSink(l){const i=l.streamId,p=this.sourceName,g=l.sourceName,b=this.comObj,F=this,w=this.actionHandler[l.action],_={enqueue(W,I=1,k){if(this.isCancelled)return;const R=this.desiredSize;this.desiredSize-=I,R>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),b.postMessage({sourceName:p,targetName:g,stream:H.ENQUEUE,streamId:i,chunk:W},k)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:p,targetName:g,stream:H.CLOSE,streamId:i}),delete F.streamSinks[i])},error(W){(0,o.assert)(W instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:p,targetName:g,stream:H.ERROR,streamId:i,reason:Z(W)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:l.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[i]=_,new Promise(function(W){W(w(l.data,_))}).then(function(){b.postMessage({sourceName:p,targetName:g,stream:H.START_COMPLETE,streamId:i,success:!0})},function(W){b.postMessage({sourceName:p,targetName:g,stream:H.START_COMPLETE,streamId:i,reason:Z(W)})})}_processStreamMessage(l){const i=l.streamId,p=this.sourceName,g=l.sourceName,b=this.comObj,F=this.streamControllers[i],w=this.streamSinks[i];switch(l.stream){case H.START_COMPLETE:l.success?F.startCall.resolve():F.startCall.reject(Z(l.reason));break;case H.PULL_COMPLETE:l.success?F.pullCall.resolve():F.pullCall.reject(Z(l.reason));break;case H.PULL:if(!w){b.postMessage({sourceName:p,targetName:g,stream:H.PULL_COMPLETE,streamId:i,success:!0});break}w.desiredSize<=0&&l.desiredSize>0&&w.sinkCapability.resolve(),w.desiredSize=l.desiredSize,new Promise(function(_){_(w.onPull&&w.onPull())}).then(function(){b.postMessage({sourceName:p,targetName:g,stream:H.PULL_COMPLETE,streamId:i,success:!0})},function(_){b.postMessage({sourceName:p,targetName:g,stream:H.PULL_COMPLETE,streamId:i,reason:Z(_)})});break;case H.ENQUEUE:if((0,o.assert)(F,"enqueue should have stream controller"),F.isClosed)break;F.controller.enqueue(l.chunk);break;case H.CLOSE:if((0,o.assert)(F,"close should have stream controller"),F.isClosed)break;F.isClosed=!0,F.controller.close(),this._deleteStreamController(F,i);break;case H.ERROR:(0,o.assert)(F,"error should have stream controller"),F.controller.error(Z(l.reason)),this._deleteStreamController(F,i);break;case H.CANCEL_COMPLETE:l.success?F.cancelCall.resolve():F.cancelCall.reject(Z(l.reason)),this._deleteStreamController(F,i);break;case H.CANCEL:if(!w)break;new Promise(function(_){_(w.onCancel&&w.onCancel(Z(l.reason)))}).then(function(){b.postMessage({sourceName:p,targetName:g,stream:H.CANCEL_COMPLETE,streamId:i,success:!0})},function(_){b.postMessage({sourceName:p,targetName:g,stream:H.CANCEL_COMPLETE,streamId:i,reason:Z(_)})}),w.sinkCapability.reject(Z(l.reason)),w.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(l,i){await Promise.allSettled([l.startCall&&l.startCall.promise,l.pullCall&&l.pullCall.promise,l.cancelCall&&l.cancelCall.promise]),delete this.streamControllers[i]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}u.MessageHandler=M},(et,u,V)=>{var H,Z;Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var o=V(1);class J{constructor({parsedData:r,rawData:l}){Tt(this,H,void 0);Tt(this,Z,void 0);kt(this,H,r),kt(this,Z,l)}getRaw(){return pt(this,Z)}get(r){return pt(this,H).get(r)??null}getAll(){return(0,o.objectFromMap)(pt(this,H))}has(r){return pt(this,H).has(r)}}H=new WeakMap,Z=new WeakMap,u.Metadata=J},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var o=V(1);class J{constructor(M,r){this.visible=!0,this.name=M,this.intent=r}}class H{constructor(M){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,M!==null){this.name=M.name,this.creator=M.creator,this._order=M.order;for(const r of M.groups)this._groups.set(r.id,new J(r.name,r.intent));if(M.baseState==="OFF")for(const r of this._groups)r.visible=!1;for(const r of M.on)this._groups.get(r).visible=!0;for(const r of M.off)this._groups.get(r).visible=!1}}_evaluateVisibilityExpression(M){const r=M.length;if(r<2)return!0;const l=M[0];for(let i=1;i<r;i++){const p=M[i];let g;if(Array.isArray(p))g=this._evaluateVisibilityExpression(p);else if(this._groups.has(p))g=this._groups.get(p).visible;else return(0,o.warn)(`Optional content group not found: ${p}`),!0;switch(l){case"And":if(!g)return!1;break;case"Or":if(g)return!0;break;case"Not":return!g;default:return!0}}return l==="And"}isVisible(M){if(this._groups.size===0)return!0;if(!M)return(0,o.warn)("Optional content group not defined."),!0;if(M.type==="OCG")return this._groups.has(M.id)?this._groups.get(M.id).visible:((0,o.warn)(`Optional content group not found: ${M.id}`),!0);if(M.type==="OCMD"){if(M.expression)return this._evaluateVisibilityExpression(M.expression);if(!M.policy||M.policy==="AnyOn"){for(const r of M.ids){if(!this._groups.has(r))return(0,o.warn)(`Optional content group not found: ${r}`),!0;if(this._groups.get(r).visible)return!0}return!1}else if(M.policy==="AllOn"){for(const r of M.ids){if(!this._groups.has(r))return(0,o.warn)(`Optional content group not found: ${r}`),!0;if(!this._groups.get(r).visible)return!1}return!0}else if(M.policy==="AnyOff"){for(const r of M.ids){if(!this._groups.has(r))return(0,o.warn)(`Optional content group not found: ${r}`),!0;if(!this._groups.get(r).visible)return!0}return!1}else if(M.policy==="AllOff"){for(const r of M.ids){if(!this._groups.has(r))return(0,o.warn)(`Optional content group not found: ${r}`),!0;if(this._groups.get(r).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${M.policy}.`),!0}return(0,o.warn)(`Unknown group type ${M.type}.`),!0}setVisibility(M,r=!0){if(!this._groups.has(M)){(0,o.warn)(`Optional content group not found: ${M}`);return}this._groups.get(M).visible=!!r}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,o.objectFromMap)(this._groups):null}getGroup(M){return this._groups.get(M)||null}}u.OptionalContentConfig=H},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var o=V(1),J=V(5);class H{constructor(l,i){(0,o.assert)(i,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=l.progressiveDone||!1,this._contentDispositionFilename=l.contentDispositionFilename||null;const p=l.initialData;if(p?.length>0){const g=new Uint8Array(p).buffer;this._queuedChunks.push(g)}this._pdfDataRangeTransport=i,this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._contentLength=l.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((g,b)=>{this._onReceiveData({begin:g,chunk:b})}),this._pdfDataRangeTransport.addProgressListener((g,b)=>{this._onProgress({loaded:g,total:b})}),this._pdfDataRangeTransport.addProgressiveReadListener(g=>{this._onReceiveData({chunk:g})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(l){const i=new Uint8Array(l.chunk).buffer;if(l.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const p=this._rangeReaders.some(function(g){return g._begin!==l.begin?!1:(g._enqueue(i),!0)});(0,o.assert)(p,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(l){if(l.total===void 0){const i=this._rangeReaders[0];i?.onProgress&&i.onProgress({loaded:l.loaded})}else{const i=this._fullRequestReader;i?.onProgress&&i.onProgress({loaded:l.loaded,total:l.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(l){const i=this._rangeReaders.indexOf(l);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const l=this._queuedChunks;return this._queuedChunks=null,new Z(this,l,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(l,i){if(i<=this._progressiveDataLength)return null;const p=new M(this,l,i);return this._pdfDataRangeTransport.requestDataRange(l,i),this._rangeReaders.push(p),p}cancelAllRequests(l){this._fullRequestReader&&this._fullRequestReader.cancel(l);for(const i of this._rangeReaders.slice(0))i.cancel(l);this._pdfDataRangeTransport.abort()}}u.PDFDataTransportStream=H;class Z{constructor(l,i,p=!1,g=null){this._stream=l,this._done=p||!1,this._filename=(0,J.isPdfFile)(g)?g:null,this._queuedChunks=i||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),l._fullRequestReader=this,this.onProgress=null}_enqueue(l){this._done||(this._requests.length>0?this._requests.shift().resolve({value:l,done:!1}):this._queuedChunks.push(l),this._loaded+=l.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const l=(0,o.createPromiseCapability)();return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class M{constructor(l,i,p){this._stream=l,this._begin=i,this._end=p,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(l){if(!this._done){if(this._requests.length===0)this._queuedChunk=l;else{this._requests.shift().resolve({value:l,done:!1});for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const l=(0,o.createPromiseCapability)();return this._requests.push(l),l.promise}cancel(l){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(et,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class V{static textContent(J){const H=[],Z={items:H,styles:Object.create(null)};function M(r){if(!r)return;let l=null;const i=r.name;if(i==="#text")l=r.value;else if(V.shouldBuildText(i))r?.attributes?.textContent?l=r.attributes.textContent:r.value&&(l=r.value);else return;if(l!==null&&H.push({str:l}),!!r.children)for(const p of r.children)M(p)}return M(J),Z}static shouldBuildText(J){return!(J==="textarea"||J==="input"||J==="option"||J==="select")}}u.XfaText=V},(et,u,V)=>{var m,Vt;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationLayer=void 0;var o=V(1),J=V(5),H=V(9),Z=V(19),M=V(20);const r=1e3,l=new WeakSet;function i(C){return{width:C[2]-C[0],height:C[3]-C[1]}}class p{static create(t){switch(t.data.annotationType){case o.AnnotationType.LINK:return new b(t);case o.AnnotationType.TEXT:return new F(t);case o.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new _(t);case"Btn":return t.data.radioButton?new I(t):t.data.checkBox?new W(t):new k(t);case"Ch":return new R(t)}return new w(t);case o.AnnotationType.POPUP:return new n(t);case o.AnnotationType.FREETEXT:return new v(t);case o.AnnotationType.LINE:return new P(t);case o.AnnotationType.SQUARE:return new A(t);case o.AnnotationType.CIRCLE:return new O(t);case o.AnnotationType.POLYLINE:return new T(t);case o.AnnotationType.CARET:return new G(t);case o.AnnotationType.INK:return new B(t);case o.AnnotationType.POLYGON:return new L(t);case o.AnnotationType.HIGHLIGHT:return new z(t);case o.AnnotationType.UNDERLINE:return new Y(t);case o.AnnotationType.SQUIGGLY:return new X(t);case o.AnnotationType.STRIKEOUT:return new f(t);case o.AnnotationType.STAMP:return new s(t);case o.AnnotationType.FILEATTACHMENT:return new e(t);default:return new g(t)}}}class g{constructor(t,{isRenderable:h=!1,ignoreBorder:S=!1,createQuadrilaterals:x=!1}={}){this.isRenderable=h,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,h&&(this.container=this._createContainer(S)),x&&(this.quadrilaterals=this._createQuadrilaterals(S))}_createContainer(t=!1){const h=this.data,S=this.page,x=this.viewport,d=document.createElement("section");let{width:E,height:D}=i(h.rect);d.setAttribute("data-annotation-id",h.id);const N=o.Util.normalizeRect([h.rect[0],S.view[3]-h.rect[1]+S.view[1],h.rect[2],S.view[3]-h.rect[3]+S.view[1]]);if(h.hasOwnCanvas){const q=x.transform.slice(),[K,Q]=o.Util.singularValueDecompose2dScale(q);E=Math.ceil(E*K),D=Math.ceil(D*Q),N[0]*=K,N[1]*=Q;for(let nt=0;nt<4;nt++)q[nt]=Math.sign(q[nt]);d.style.transform=`matrix(${q.join(",")})`}else d.style.transform=`matrix(${x.transform.join(",")})`;if(d.style.transformOrigin=`${-N[0]}px ${-N[1]}px`,!t&&h.borderStyle.width>0){d.style.borderWidth=`${h.borderStyle.width}px`,h.borderStyle.style!==o.AnnotationBorderStyleType.UNDERLINE&&(E-=2*h.borderStyle.width,D-=2*h.borderStyle.width);const q=h.borderStyle.horizontalCornerRadius,K=h.borderStyle.verticalCornerRadius;if(q>0||K>0){const nt=`${q}px / ${K}px`;d.style.borderRadius=nt}switch(h.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:d.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:d.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:d.style.borderBottomStyle="solid";break}h.borderColor||h.color||null?d.style.borderColor=o.Util.makeHexColor(h.color[0]|0,h.color[1]|0,h.color[2]|0):d.style.borderWidth=0}return d.style.left=`${N[0]}px`,d.style.top=`${N[1]}px`,h.hasOwnCanvas?d.style.width=d.style.height="auto":(d.style.width=`${E}px`,d.style.height=`${D}px`),d}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const h=[],S=this.data.rect;for(const x of this.data.quadPoints)this.data.rect=[x[2].x,x[2].y,x[1].x,x[1].y],h.push(this._createContainer(t));return this.data.rect=S,h}_createPopup(t,h){let S=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,S=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.style.height=S.style.height,t.style.width=S.style.width,S.appendChild(t));const d=new a({container:S,trigger:t,color:h.color,titleObj:h.titleObj,modificationDate:h.modificationDate,contentsObj:h.contentsObj,richText:h.richText,hideWrapper:!0}).render();d.style.left=S.style.width,S.appendChild(d)}_renderQuadrilaterals(t){for(const h of this.quadrilaterals)h.className=t;return this.quadrilaterals}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,h=null){const S=[];if(this._fieldObjects){const x=this._fieldObjects[t];if(x)for(const{page:d,id:E,exportValues:D}of x){if(d===-1||E===h)continue;const N=typeof D=="string"?D:null,q=document.getElementById(E);if(q&&!l.has(q)){(0,o.warn)(`_getElementsByName - element not allowed: ${E}`);continue}S.push({id:E,exportValue:N,domElement:q})}return S}for(const x of document.getElementsByName(t)){const{id:d,exportValue:E}=x;d!==h&&(!l.has(x)||S.push({id:d,exportValue:E,domElement:x}))}return S}static get platform(){const t=typeof navigator<"u"?navigator.platform:"";return(0,o.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class b extends g{constructor(t,h=null){const S=!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"]));super(t,{isRenderable:S,ignoreBorder:!!h?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:t,linkService:h}=this,S=document.createElement("a");if(t.url)h.addLinkAttributes||(0,o.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),h.addLinkAttributes?.(S,t.url,t.newWindow);else if(t.action)this._bindNamedAction(S,t.action);else if(t.dest)this._bindLink(S,t.dest);else{let x=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(x=!0,this._bindJSAction(S,t)),t.resetForm?this._bindResetFormAction(S,t.resetForm):x||this._bindLink(S,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((x,d)=>{const E=d===0?S:S.cloneNode();return x.appendChild(E),x}):(this.container.className="linkAnnotation",this.container.appendChild(S),this.container)}_bindLink(t,h){t.href=this.linkService.getDestinationHash(h),t.onclick=()=>(h&&this.linkService.goToDestination(h),!1),(h||h==="")&&(t.className="internalLink")}_bindNamedAction(t,h){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(h),!1),t.className="internalLink"}_bindJSAction(t,h){t.href=this.linkService.getAnchorUrl("");const S=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const x of Object.keys(h.actions)){const d=S.get(x);!d||(t[d]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h.id,name:x}}),!1))}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,h){const S=t.onclick;if(S||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),S||(t.onclick=()=>!1);return}t.onclick=()=>{S&&S();const{fields:x,refs:d,include:E}=h,D=[];if(x.length!==0||d.length!==0){const K=new Set(d);for(const Q of x){const nt=this._fieldObjects[Q]||[];for(const{id:tt}of nt)K.add(tt)}for(const Q of Object.values(this._fieldObjects))for(const nt of Q)K.has(nt.id)===E&&D.push(nt)}else for(const K of Object.values(this._fieldObjects))D.push(...K);const N=this.annotationStorage,q=[];for(const K of D){const{id:Q}=K;switch(q.push(Q),K.type){case"text":{const tt=K.defaultValue||"";N.setValue(Q,{value:tt,valueAsString:tt});break}case"checkbox":case"radiobutton":{const tt=K.defaultValue===K.exportValues;N.setValue(Q,{value:tt});break}case"combobox":case"listbox":{const tt=K.defaultValue||"";N.setValue(Q,{value:tt});break}default:continue}const nt=document.getElementById(Q);!nt||!l.has(nt)||nt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:q,name:"ResetForm"}}),!1}}}class F extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class w extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:h,isMac:S}=g.platform;return h&&t.ctrlKey||S&&t.metaKey}_setEventListener(t,h,S,x){h.includes("mouse")?t.addEventListener(h,d=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:S,value:x(d),shift:d.shiftKey,modifier:this._getKeyModifier(d)}})}):t.addEventListener(h,d=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:S,value:x(d)}})})}_setEventListeners(t,h,S){for(const[x,d]of h)(d==="Action"||this.data.actions?.[d])&&this._setEventListener(t,x,d,S)}_setBackgroundColor(t){const h=this.data.backgroundColor||null;t.style.backgroundColor=h===null?"transparent":o.Util.makeHexColor(h[0],h[1],h[2])}_dispatchEventFromSandbox(t,h){const S=(d,E,D)=>{const N=D.detail[d];D.target.style[E]=Z.ColorConverters[`${N[0]}_HTML`](N.slice(1))},x={display:d=>{const E=d.detail.display%2===1;d.target.style.visibility=E?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:E,print:d.detail.display===0||d.detail.display===3})},print:d=>{this.annotationStorage.setValue(this.data.id,{print:d.detail.print})},hidden:d=>{d.target.style.visibility=d.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:d.detail.hidden})},focus:d=>{setTimeout(()=>d.target.focus({preventScroll:!1}),0)},userName:d=>{d.target.title=d.detail.userName},readonly:d=>{d.detail.readonly?d.target.setAttribute("readonly",""):d.target.removeAttribute("readonly")},required:d=>{d.detail.required?d.target.setAttribute("required",""):d.target.removeAttribute("required")},bgColor:d=>{S("bgColor","backgroundColor",d)},fillColor:d=>{S("fillColor","backgroundColor",d)},fgColor:d=>{S("fgColor","color",d)},textColor:d=>{S("textColor","color",d)},borderColor:d=>{S("borderColor","borderColor",d)},strokeColor:d=>{S("strokeColor","borderColor",d)}};for(const d of Object.keys(h.detail)){const E=t[d]||x[d];E&&E(h)}}}class _ extends w{constructor(t){const h=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:h})}setPropertyOnSiblings(t,h,S,x){const d=this.annotationStorage;for(const E of this._getElementsByName(t.name,t.id))E.domElement&&(E.domElement[h]=S),d.setValue(E.id,{[x]:S})}render(){const t=this.annotationStorage,h=this.data.id;this.container.className="textWidgetAnnotation";let S=null;if(this.renderForms){const x=t.getValue(h,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),d=x.valueAsString||x.value||"",E={userValue:null,formattedValue:null};this.data.multiLine?(S=document.createElement("textarea"),S.textContent=d):(S=document.createElement("input"),S.type="text",S.setAttribute("value",d)),l.add(S),S.disabled=this.data.readOnly,S.name=this.data.fieldName,S.tabIndex=r,E.userValue=d,S.setAttribute("id",h),S.addEventListener("input",N=>{t.setValue(h,{value:N.target.value}),this.setPropertyOnSiblings(S,"value",N.target.value,"value")}),S.addEventListener("resetform",N=>{const q=this.data.defaultFieldValue||"";S.value=E.userValue=q,delete E.formattedValue});let D=N=>{E.formattedValue&&(N.target.value=E.formattedValue),N.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){S.addEventListener("focus",q=>{E.userValue&&(q.target.value=E.userValue)}),S.addEventListener("updatefromsandbox",q=>{const K={value(Q){E.userValue=Q.detail.value||"",t.setValue(h,{value:E.userValue.toString()}),E.formattedValue||(Q.target.value=E.userValue)},valueAsString(Q){E.formattedValue=Q.detail.valueAsString||"",Q.target!==document.activeElement&&(Q.target.value=E.formattedValue),t.setValue(h,{formattedValue:E.formattedValue})},selRange(Q){const[nt,tt]=Q.detail.selRange;nt>=0&&tt<Q.target.value.length&&Q.target.setSelectionRange(nt,tt)}};this._dispatchEventFromSandbox(K,q)}),S.addEventListener("keydown",q=>{let K=-1;q.key==="Escape"?K=0:q.key==="Enter"?K=2:q.key==="Tab"&&(K=3),K!==-1&&(E.userValue=q.target.value,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:q.target.value,willCommit:!0,commitKey:K,selStart:q.target.selectionStart,selEnd:q.target.selectionEnd}}))});const N=D;D=null,S.addEventListener("blur",q=>{E.userValue=q.target.value,this._mouseState.isDown&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:q.target.value,willCommit:!0,commitKey:1,selStart:q.target.selectionStart,selEnd:q.target.selectionEnd}}),N(q)}),this.data.actions?.Keystroke&&S.addEventListener("beforeinput",q=>{E.formattedValue="";const{data:K,target:Q}=q,{value:nt,selectionStart:tt,selectionEnd:st}=Q;this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:nt,change:K,willCommit:!1,selStart:tt,selEnd:st}})}),this._setEventListeners(S,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],q=>q.target.value)}if(D&&S.addEventListener("blur",D),this.data.maxLen!==null&&(S.maxLength=this.data.maxLen),this.data.comb){const q=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;S.classList.add("comb"),S.style.letterSpacing=`calc(${q}px - 1ch)`}}else S=document.createElement("div"),S.textContent=this.data.fieldValue,S.style.verticalAlign="middle",S.style.display="table-cell";return this._setTextStyle(S),this._setBackgroundColor(S),this.container.appendChild(S),this.container}_setTextStyle(t){const h=["left","center","right"],{fontSize:S,fontColor:x}=this.data.defaultAppearanceData,d=t.style;S&&(d.fontSize=`${S}px`),d.color=o.Util.makeHexColor(x[0],x[1],x[2]),this.data.textAlignment!==null&&(d.textAlign=h[this.data.textAlignment])}}class W extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,h=this.data,S=h.id;let x=t.getValue(S,{value:h.exportValue===h.fieldValue}).value;typeof x=="string"&&(x=x!=="Off",t.setValue(S,{value:x})),this.container.className="buttonWidgetAnnotation checkBox";const d=document.createElement("input");return l.add(d),d.disabled=h.readOnly,d.type="checkbox",d.name=h.fieldName,x&&d.setAttribute("checked",!0),d.setAttribute("id",S),d.setAttribute("exportValue",h.exportValue),d.tabIndex=r,d.addEventListener("change",E=>{const{name:D,checked:N}=E.target;for(const q of this._getElementsByName(D,S)){const K=N&&q.exportValue===h.exportValue;q.domElement&&(q.domElement.checked=K),t.setValue(q.id,{value:K})}t.setValue(S,{value:N})}),d.addEventListener("resetform",E=>{const D=h.defaultFieldValue||"Off";E.target.checked=D===h.exportValue}),this.enableScripting&&this.hasJSActions&&(d.addEventListener("updatefromsandbox",E=>{const D={value(N){N.target.checked=N.detail.value!=="Off",t.setValue(S,{value:N.target.checked})}};this._dispatchEventFromSandbox(D,E)}),this._setEventListeners(d,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.checked)),this._setBackgroundColor(d),this.container.appendChild(d),this.container}}class I extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,h=this.data,S=h.id;let x=t.getValue(S,{value:h.fieldValue===h.buttonValue}).value;typeof x=="string"&&(x=x!==h.buttonValue,t.setValue(S,{value:x}));const d=document.createElement("input");if(l.add(d),d.disabled=h.readOnly,d.type="radio",d.name=h.fieldName,x&&d.setAttribute("checked",!0),d.setAttribute("id",S),d.tabIndex=r,d.addEventListener("change",E=>{const{name:D,checked:N}=E.target;for(const q of this._getElementsByName(D,S))t.setValue(q.id,{value:!1});t.setValue(S,{value:N})}),d.addEventListener("resetform",E=>{const D=h.defaultFieldValue;E.target.checked=D!=null&&D===h.buttonValue}),this.enableScripting&&this.hasJSActions){const E=h.buttonValue;d.addEventListener("updatefromsandbox",D=>{const N={value:q=>{const K=E===q.detail.value;for(const Q of this._getElementsByName(q.target.name)){const nt=K&&Q.id===S;Q.domElement&&(Q.domElement.checked=nt),t.setValue(Q.id,{value:nt})}}};this._dispatchEventFromSandbox(N,D)}),this._setEventListeners(d,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],D=>D.target.checked)}return this._setBackgroundColor(d),this.container.appendChild(d),this.container}}class k extends b{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),t}}class R extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,h=this.data.id;t.getValue(h,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});let{fontSize:S}=this.data.defaultAppearanceData;S||(S=9);const x=`calc(${S}px * var(--zoom-factor))`,d=document.createElement("select");l.add(d),d.disabled=this.data.readOnly,d.name=this.data.fieldName,d.setAttribute("id",h),d.tabIndex=r,d.style.fontSize=`${S}px`,this.data.combo||(d.size=this.data.options.length,this.data.multiSelect&&(d.multiple=!0)),d.addEventListener("resetform",N=>{const q=this.data.defaultFieldValue;for(const K of d.options)K.selected=K.value===q});for(const N of this.data.options){const q=document.createElement("option");q.textContent=N.displayValue,q.value=N.exportValue,this.data.combo&&(q.style.fontSize=x),this.data.fieldValue.includes(N.exportValue)&&q.setAttribute("selected",!0),d.appendChild(q)}const E=(N,q)=>{const K=q?"value":"textContent",Q=N.target.options;return N.target.multiple?Array.prototype.filter.call(Q,nt=>nt.selected).map(nt=>nt[K]):Q.selectedIndex===-1?null:Q[Q.selectedIndex][K]},D=N=>{const q=N.target.options;return Array.prototype.map.call(q,K=>({displayValue:K.textContent,exportValue:K.value}))};return this.enableScripting&&this.hasJSActions?(d.addEventListener("updatefromsandbox",N=>{const q={value(K){const Q=K.detail.value,nt=new Set(Array.isArray(Q)?Q:[Q]);for(const tt of d.options)tt.selected=nt.has(tt.value);t.setValue(h,{value:E(K,!0)})},multipleSelection(K){d.multiple=!0},remove(K){const Q=d.options,nt=K.detail.remove;Q[nt].selected=!1,d.remove(nt),Q.length>0&&Array.prototype.findIndex.call(Q,st=>st.selected)===-1&&(Q[0].selected=!0),t.setValue(h,{value:E(K,!0),items:D(K)})},clear(K){for(;d.length!==0;)d.remove(0);t.setValue(h,{value:null,items:[]})},insert(K){const{index:Q,displayValue:nt,exportValue:tt}=K.detail.insert,st=document.createElement("option");st.textContent=nt,st.value=tt,d.insertBefore(st,d.children[Q]),t.setValue(h,{value:E(K,!0),items:D(K)})},items(K){const{items:Q}=K.detail;for(;d.length!==0;)d.remove(0);for(const nt of Q){const{displayValue:tt,exportValue:st}=nt,ct=document.createElement("option");ct.textContent=tt,ct.value=st,d.appendChild(ct)}d.options.length>0&&(d.options[0].selected=!0),t.setValue(h,{value:E(K,!0),items:D(K)})},indices(K){const Q=new Set(K.detail.indices);for(const nt of K.target.options)nt.selected=Q.has(nt.index);t.setValue(h,{value:E(K,!0)})},editable(K){K.target.disabled=!K.detail.editable}};this._dispatchEventFromSandbox(q,N)}),d.addEventListener("input",N=>{const q=E(N,!0),K=E(N,!1);t.setValue(h,{value:q}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h,name:"Keystroke",value:K,changeEx:q,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],N=>N.target.checked)):d.addEventListener("input",function(N){t.setValue(h,{value:E(N)})}),this._setBackgroundColor(d),this.container.appendChild(d),this.container}}class n extends g{constructor(t){const h=!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h})}render(){const t=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",t.includes(this.data.parentType))return this.container;const h=`[data-annotation-id="${this.data.parentId}"]`,S=this.layer.querySelectorAll(h);if(S.length===0)return this.container;const x=new a({container:this.container,trigger:Array.from(S),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),d=this.page,E=o.Util.normalizeRect([this.data.parentRect[0],d.view[3]-this.data.parentRect[1]+d.view[1],this.data.parentRect[2],d.view[3]-this.data.parentRect[3]+d.view[1]]),D=E[0]+this.data.parentRect[2]-this.data.parentRect[0],N=E[1];return this.container.style.transformOrigin=`${-D}px ${-N}px`,this.container.style.left=`${D}px`,this.container.style.top=`${N}px`,this.container.appendChild(x.render()),this.container}}class a{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const h=document.createElement("div");h.className="popupWrapper",this.hideElement=this.hideWrapper?h:this.container,this.hideElement.hidden=!0;const S=document.createElement("div");S.className="popup";const x=this.color;if(x){const D=.7*(255-x[0])+x[0],N=.7*(255-x[1])+x[1],q=.7*(255-x[2])+x[2];S.style.backgroundColor=o.Util.makeHexColor(D|0,N|0,q|0)}const d=document.createElement("h1");d.dir=this.titleObj.dir,d.textContent=this.titleObj.str,S.appendChild(d);const E=J.PDFDateString.toDateObject(this.modificationDate);if(E){const D=document.createElement("span");D.className="popupDate",D.textContent="{{date}}, {{time}}",D.dataset.l10nId="annotation_date_string",D.dataset.l10nArgs=JSON.stringify({date:E.toLocaleDateString(),time:E.toLocaleTimeString()}),S.appendChild(D)}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str))M.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:S}),S.lastChild.className="richText popupContent";else{const D=this._formatContents(this.contentsObj);S.appendChild(D)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const D of this.trigger)D.addEventListener("click",this._toggle.bind(this)),D.addEventListener("mouseover",this._show.bind(this,!1)),D.addEventListener("mouseout",this._hide.bind(this,!1));return S.addEventListener("click",this._hide.bind(this,!0)),h.appendChild(S),h}_formatContents({str:t,dir:h}){const S=document.createElement("p");S.className="popupContent",S.dir=h;const x=t.split(/(?:\r\n?|\n)/);for(let d=0,E=x.length;d<E;++d){const D=x[d];S.appendChild(document.createTextNode(D)),d<E-1&&S.appendChild(document.createElement("br"))}return S}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class v extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:h,height:S}=i(t.rect),x=this.svgFactory.create(h,S),d=this.svgFactory.createElement("svg:line");return d.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),d.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),d.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),d.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),d.setAttribute("stroke-width",t.borderStyle.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),x.appendChild(d),this.container.append(x),this._createPopup(d,t),this.container}}class A extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:h,height:S}=i(t.rect),x=this.svgFactory.create(h,S),d=t.borderStyle.width,E=this.svgFactory.createElement("svg:rect");return E.setAttribute("x",d/2),E.setAttribute("y",d/2),E.setAttribute("width",h-d),E.setAttribute("height",S-d),E.setAttribute("stroke-width",d||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),x.appendChild(E),this.container.append(x),this._createPopup(E,t),this.container}}class O extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:h,height:S}=i(t.rect),x=this.svgFactory.create(h,S),d=t.borderStyle.width,E=this.svgFactory.createElement("svg:ellipse");return E.setAttribute("cx",h/2),E.setAttribute("cy",S/2),E.setAttribute("rx",h/2-d/2),E.setAttribute("ry",S/2-d/2),E.setAttribute("stroke-width",d||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),x.appendChild(E),this.container.append(x),this._createPopup(E,t),this.container}}class T extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0});this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:h,height:S}=i(t.rect),x=this.svgFactory.create(h,S);let d=[];for(const D of t.vertices){const N=D.x-t.rect[0],q=t.rect[3]-D.y;d.push(N+","+q)}d=d.join(" ");const E=this.svgFactory.createElement(this.svgElementName);return E.setAttribute("points",d),E.setAttribute("stroke-width",t.borderStyle.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),x.appendChild(E),this.container.append(x),this._createPopup(E,t),this.container}}class L extends T{constructor(t){super(t);this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class G extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class B extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0});this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:h,height:S}=i(t.rect),x=this.svgFactory.create(h,S);for(const d of t.inkLists){let E=[];for(const N of d){const q=N.x-t.rect[0],K=t.rect[3]-N.y;E.push(`${q},${K}`)}E=E.join(" ");const D=this.svgFactory.createElement(this.svgElementName);D.setAttribute("points",E),D.setAttribute("stroke-width",t.borderStyle.width||1),D.setAttribute("stroke","transparent"),D.setAttribute("fill","transparent"),this._createPopup(D,t),x.appendChild(D)}return this.container.append(x),this.container}}class z extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Y extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class X extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class f extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class s extends g{constructor(t){const h=!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str);super(t,{isRenderable:h,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class e extends g{constructor(t){super(t,{isRenderable:!0});const{filename:h,content:S}=this.data.file;this.filename=(0,J.getFilenameFromUrl)(h),this.content=S,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,id:(0,o.stringToPDFString)(h),filename:h,content:S})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class c{static render(t){const h=[],S=[];for(const d of t.annotations){if(!d)continue;const{width:E,height:D}=i(d.rect);if(!(E<=0||D<=0)){if(d.annotationType===o.AnnotationType.POPUP){S.push(d);continue}h.push(d)}}S.length&&h.push(...S);const x=t.div;for(const d of h){const E=p.create({data:d,layer:x,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new J.DOMSVGFactory,annotationStorage:t.annotationStorage||new H.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(E.isRenderable){const D=E.render();if(d.hidden&&(D.style.visibility="hidden"),Array.isArray(D))for(const N of D)x.appendChild(N);else E instanceof n?x.prepend(D):x.appendChild(D)}}Dt(this,m,Vt).call(this,x,t.annotationCanvasMap)}static update(t){const{page:h,viewport:S,annotations:x,annotationCanvasMap:d,div:E}=t,D=S.transform,N=`matrix(${D.join(",")})`;let q,K;for(const Q of x){const nt=E.querySelectorAll(`[data-annotation-id="${Q.id}"]`);if(nt)for(const tt of nt)if(Q.hasOwnCanvas){const st=o.Util.normalizeRect([Q.rect[0],h.view[3]-Q.rect[1]+h.view[1],Q.rect[2],h.view[3]-Q.rect[3]+h.view[1]]);if(!K){q=Math.abs(D[0]||D[1]);const ot=D.slice();for(let lt=0;lt<4;lt++)ot[lt]=Math.sign(ot[lt]);K=`matrix(${ot.join(",")})`}const ct=st[0]*q,it=st[1]*q;tt.style.left=`${ct}px`,tt.style.top=`${it}px`,tt.style.transformOrigin=`${-ct}px ${-it}px`,tt.style.transform=K}else tt.style.transform=N}Dt(this,m,Vt).call(this,E,d),E.hidden=!1}}m=new WeakSet,Vt=function(t,h){if(!!h){for(const[S,x]of h){const d=t.querySelector(`[data-annotation-id="${S}"]`);if(!d)continue;const{firstChild:E}=d;E.nodeName==="CANVAS"?d.replaceChild(x,E):d.insertBefore(x,E)}h.clear()}},Tt(c,m),u.AnnotationLayer=c},(et,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0;function V(J){return Math.floor(Math.max(0,Math.min(1,J))*255).toString(16).padStart(2,"0")}class o{static CMYK_G([H,Z,M,r]){return["G",1-Math.min(1,.3*H+.59*M+.11*Z+r)]}static G_CMYK([H]){return["CMYK",0,0,0,1-H]}static G_RGB([H]){return["RGB",H,H,H]}static G_HTML([H]){const Z=V(H);return`#${Z}${Z}${Z}`}static RGB_G([H,Z,M]){return["G",.3*H+.59*Z+.11*M]}static RGB_HTML([H,Z,M]){const r=V(H),l=V(Z),i=V(M);return`#${r}${l}${i}`}static T_HTML(){return"#00000000"}static CMYK_RGB([H,Z,M,r]){return["RGB",1-Math.min(1,H+r),1-Math.min(1,M+r),1-Math.min(1,Z+r)]}static CMYK_HTML(H){return this.RGB_HTML(this.CMYK_RGB(H))}static RGB_CMYK([H,Z,M]){const r=1-H,l=1-Z,i=1-M,p=Math.min(r,l,i);return["CMYK",r,l,i,p]}}u.ColorConverters=o},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var o=V(1),J=V(17);class H{static setupStorage(M,r,l,i,p){const g=i.getValue(r,{value:null});switch(l.name){case"textarea":if(g.value!==null&&(M.textContent=g.value),p==="print")break;M.addEventListener("input",b=>{i.setValue(r,{value:b.target.value})});break;case"input":if(l.attributes.type==="radio"||l.attributes.type==="checkbox"){if(g.value===l.attributes.xfaOn?M.setAttribute("checked",!0):g.value===l.attributes.xfaOff&&M.removeAttribute("checked"),p==="print")break;M.addEventListener("change",b=>{i.setValue(r,{value:b.target.checked?b.target.getAttribute("xfaOn"):b.target.getAttribute("xfaOff")})})}else{if(g.value!==null&&M.setAttribute("value",g.value),p==="print")break;M.addEventListener("input",b=>{i.setValue(r,{value:b.target.value})})}break;case"select":if(g.value!==null)for(const b of l.children)b.attributes.value===g.value&&(b.attributes.selected=!0);M.addEventListener("input",b=>{const F=b.target.options,w=F.selectedIndex===-1?"":F[F.selectedIndex].value;i.setValue(r,{value:w})});break}}static setAttributes({html:M,element:r,storage:l=null,intent:i,linkService:p}){const{attributes:g}=r,b=M instanceof HTMLAnchorElement;g.type==="radio"&&(g.name=`${g.name}-${i}`);for(const[F,w]of Object.entries(g))if(!(w==null||F==="dataId"))if(F!=="style")if(F==="textContent")M.textContent=w;else if(F==="class")w.length&&M.setAttribute(F,w.join(" "));else{if(b&&(F==="href"||F==="newWindow"))continue;M.setAttribute(F,w)}else Object.assign(M.style,w);b&&(p.addLinkAttributes||(0,o.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),p.addLinkAttributes?.(M,g.href,g.newWindow)),l&&g.dataId&&this.setupStorage(M,g.dataId,r,l)}static render(M){const r=M.annotationStorage,l=M.linkService,i=M.xfaHtml,p=M.intent||"display",g=document.createElement(i.name);i.attributes&&this.setAttributes({html:g,element:i,intent:p,linkService:l});const b=[[i,-1,g]],F=M.div;if(F.appendChild(g),M.viewport){const _=`matrix(${M.viewport.transform.join(",")})`;F.style.transform=_}p!=="richText"&&F.setAttribute("class","xfaLayer xfaFont");const w=[];for(;b.length>0;){const[_,W,I]=b[b.length-1];if(W+1===_.children.length){b.pop();continue}const k=_.children[++b[b.length-1][1]];if(k===null)continue;const{name:R}=k;if(R==="#text"){const a=document.createTextNode(k.value);w.push(a),I.appendChild(a);continue}let n;if(k?.attributes?.xmlns?n=document.createElementNS(k.attributes.xmlns,R):n=document.createElement(R),I.appendChild(n),k.attributes&&this.setAttributes({html:n,element:k,storage:r,intent:p,linkService:l}),k.children&&k.children.length>0)b.push([k,-1,n]);else if(k.value){const a=document.createTextNode(k.value);J.XfaText.shouldBuildText(R)&&w.push(a),n.appendChild(a)}}for(const _ of F.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:w}}static update(M){const r=`matrix(${M.viewport.transform.join(",")})`;M.div.style.transform=r,M.div.hidden=!1}}u.XfaLayer=H},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.renderTextLayer=W;var o=V(1);const J=1e5,H=30,Z=.8,M=new Map,r=/^\s+$/g;function l(I,k){const R=M.get(I);if(R)return R;k.save(),k.font=`${H}px ${I}`;const n=k.measureText("");let a=n.fontBoundingBoxAscent,v=Math.abs(n.fontBoundingBoxDescent);if(a){k.restore();const A=a/(a+v);return M.set(I,A),A}k.strokeStyle="red",k.clearRect(0,0,H,H),k.strokeText("g",0,0);let P=k.getImageData(0,0,H,H).data;v=0;for(let A=P.length-1-3;A>=0;A-=4)if(P[A]>0){v=Math.ceil(A/4/H);break}k.clearRect(0,0,H,H),k.strokeText("A",0,H),P=k.getImageData(0,0,H,H).data,a=0;for(let A=0,O=P.length;A<O;A+=4)if(P[A]>0){a=H-Math.floor(A/4/H);break}if(k.restore(),a){const A=a/(a+v);return M.set(I,A),A}return M.set(I,Z),Z}function i(I,k,R,n){const a=document.createElement("span"),v=I._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:k.str!=="",hasEOL:k.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:k.str!=="",hasEOL:k.hasEOL};I._textDivs.push(a);const P=o.Util.transform(I._viewport.transform,k.transform);let A=Math.atan2(P[1],P[0]);const O=R[k.fontName];O.vertical&&(A+=Math.PI/2);const T=Math.hypot(P[2],P[3]),L=T*l(O.fontFamily,n);let G,B;A===0?(G=P[4],B=P[5]-L):(G=P[4]+L*Math.sin(A),B=P[5]-L*Math.cos(A)),a.style.left=`${G}px`,a.style.top=`${B}px`,a.style.fontSize=`${T}px`,a.style.fontFamily=O.fontFamily,a.setAttribute("role","presentation"),a.textContent=k.str,a.dir=k.dir,I._fontInspectorEnabled&&(a.dataset.fontName=k.fontName),A!==0&&(v.angle=A*(180/Math.PI));let z=!1;if(k.str.length>1||I._enhanceTextSelection&&r.test(k.str))z=!0;else if(k.str!==" "&&k.transform[0]!==k.transform[3]){const Y=Math.abs(k.transform[0]),X=Math.abs(k.transform[3]);Y!==X&&Math.max(Y,X)/Math.min(Y,X)>1.5&&(z=!0)}if(z&&(O.vertical?v.canvasWidth=k.height*I._viewport.scale:v.canvasWidth=k.width*I._viewport.scale),I._textDivProperties.set(a,v),I._textContentStream&&I._layoutText(a),I._enhanceTextSelection&&v.hasText){let Y=1,X=0;A!==0&&(Y=Math.cos(A),X=Math.sin(A));const f=(O.vertical?k.height:k.width)*I._viewport.scale,s=T;let e,c;A!==0?(e=[Y,X,-X,Y,G,B],c=o.Util.getAxialAlignedBoundingBox([0,0,f,s],e)):c=[G,B,G+f,B+s],I._bounds.push({left:c[0],top:c[1],right:c[2],bottom:c[3],div:a,size:[f,s],m:e})}}function p(I){if(I._canceled)return;const k=I._textDivs,R=I._capability,n=k.length;if(n>J){I._renderingDone=!0,R.resolve();return}if(!I._textContentStream)for(let a=0;a<n;a++)I._layoutText(k[a]);I._renderingDone=!0,R.resolve()}function g(I,k,R){let n=0;for(let a=0;a<R;a++){const v=I[k++];v>0&&(n=n?Math.min(v,n):v)}return n}function b(I){const k=I._bounds,R=I._viewport,n=F(R.width,R.height,k);for(let a=0;a<n.length;a++){const v=k[a].div,P=I._textDivProperties.get(v);if(P.angle===0){P.paddingLeft=k[a].left-n[a].left,P.paddingTop=k[a].top-n[a].top,P.paddingRight=n[a].right-k[a].right,P.paddingBottom=n[a].bottom-k[a].bottom,I._textDivProperties.set(v,P);continue}const A=n[a],O=k[a],T=O.m,L=T[0],G=T[1],B=[[0,0],[0,O.size[1]],[O.size[0],0],O.size],z=new Float64Array(64);for(let X=0,f=B.length;X<f;X++){const s=o.Util.applyTransform(B[X],T);z[X+0]=L&&(A.left-s[0])/L,z[X+4]=G&&(A.top-s[1])/G,z[X+8]=L&&(A.right-s[0])/L,z[X+12]=G&&(A.bottom-s[1])/G,z[X+16]=G&&(A.left-s[0])/-G,z[X+20]=L&&(A.top-s[1])/L,z[X+24]=G&&(A.right-s[0])/-G,z[X+28]=L&&(A.bottom-s[1])/L,z[X+32]=L&&(A.left-s[0])/-L,z[X+36]=G&&(A.top-s[1])/-G,z[X+40]=L&&(A.right-s[0])/-L,z[X+44]=G&&(A.bottom-s[1])/-G,z[X+48]=G&&(A.left-s[0])/G,z[X+52]=L&&(A.top-s[1])/-L,z[X+56]=G&&(A.right-s[0])/G,z[X+60]=L&&(A.bottom-s[1])/-L}const Y=1+Math.min(Math.abs(L),Math.abs(G));P.paddingLeft=g(z,32,16)/Y,P.paddingTop=g(z,48,16)/Y,P.paddingRight=g(z,0,16)/Y,P.paddingBottom=g(z,16,16)/Y,I._textDivProperties.set(v,P)}}function F(I,k,R){const n=R.map(function(v,P){return{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom,index:P,x1New:void 0,x2New:void 0}});w(I,n);const a=new Array(R.length);for(const v of n){const P=v.index;a[P]={left:v.x1New,top:0,right:v.x2New,bottom:0}}R.map(function(v,P){const A=a[P],O=n[P];O.x1=v.top,O.y1=I-A.right,O.x2=v.bottom,O.y2=I-A.left,O.index=P,O.x1New=void 0,O.x2New=void 0}),w(k,n);for(const v of n){const P=v.index;a[P].top=v.x1New,a[P].bottom=v.x2New}return a}function w(I,k){k.sort(function(a,v){return a.x1-v.x1||a.index-v.index});const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const a of k){let v=0;for(;v<n.length&&n[v].end<=a.y1;)v++;let P=n.length-1;for(;P>=0&&n[P].start>=a.y2;)P--;let A,O,T,L,G=-1/0;for(T=v;T<=P;T++){A=n[T],O=A.boundary;let Y;O.x2>a.x1?Y=O.index>a.index?O.x1New:a.x1:O.x2New===void 0?Y=(O.x2+a.x1)/2:Y=O.x2New,Y>G&&(G=Y)}for(a.x1New=G,T=v;T<=P;T++)A=n[T],O=A.boundary,O.x2New===void 0?O.x2>a.x1?O.index>a.index&&(O.x2New=O.x2):O.x2New=G:O.x2New>G&&(O.x2New=Math.max(G,O.x2));const B=[];let z=null;for(T=v;T<=P;T++){A=n[T],O=A.boundary;const Y=O.x2>a.x2?O:a;z===Y?B[B.length-1].end=A.end:(B.push({start:A.start,end:A.end,boundary:Y}),z=Y)}for(n[v].start<a.y1&&(B[0].start=a.y1,B.unshift({start:n[v].start,end:a.y1,boundary:n[v].boundary})),a.y2<n[P].end&&(B[B.length-1].end=a.y2,B.push({start:a.y2,end:n[P].end,boundary:n[P].boundary})),T=v;T<=P;T++){if(A=n[T],O=A.boundary,O.x2New!==void 0)continue;let Y=!1;for(L=v-1;!Y&&L>=0&&n[L].start>=O.y1;L--)Y=n[L].boundary===O;for(L=P+1;!Y&&L<n.length&&n[L].end<=O.y2;L++)Y=n[L].boundary===O;for(L=0;!Y&&L<B.length;L++)Y=B[L].boundary===O;Y||(O.x2New=G)}Array.prototype.splice.apply(n,[v,P-v+1].concat(B))}for(const a of n){const v=a.boundary;v.x2New===void 0&&(v.x2New=Math.max(I,v.x2))}}class _{constructor({textContent:k,textContentStream:R,container:n,viewport:a,textDivs:v,textContentItemsStr:P,enhanceTextSelection:A}){this._textContent=k,this._textContentStream=R,this._container=n,this._document=n.ownerDocument,this._viewport=a,this._textDivs=v||[],this._textContentItemsStr=P||[],this._enhanceTextSelection=!!A,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(k,R){for(let n=0,a=k.length;n<a;n++){if(k[n].str===void 0){if(k[n].type==="beginMarkedContentProps"||k[n].type==="beginMarkedContent"){const v=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k[n].id!==null&&this._container.setAttribute("id",`${k[n].id}`),v.appendChild(this._container)}else k[n].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k[n].str),i(this,k[n],R,this._layoutTextCtx)}}_layoutText(k){const R=this._textDivProperties.get(k);let n="";if(R.canvasWidth!==0&&R.hasText){const{fontSize:a,fontFamily:v}=k.style;(a!==this._layoutTextLastFontSize||v!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${a} ${v}`,this._layoutTextLastFontSize=a,this._layoutTextLastFontFamily=v);const{width:P}=this._layoutTextCtx.measureText(k.textContent);if(P>0){const A=R.canvasWidth/P;this._enhanceTextSelection&&(R.scale=A),n=`scaleX(${A})`}}if(R.angle!==0&&(n=`rotate(${R.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(R.originalTransform=n),k.style.transform=n),R.hasText&&this._container.appendChild(k),R.hasEOL){const a=document.createElement("br");a.setAttribute("role","presentation"),this._container.appendChild(a)}}_render(k=0){const R=(0,o.createPromiseCapability)();let n=Object.create(null);const a=this._document.createElement("canvas");if(a.height=a.width=H,a.mozOpaque=!0,this._layoutTextCtx=a.getContext("2d",{alpha:!1}),this._textContent){const v=this._textContent.items,P=this._textContent.styles;this._processItems(v,P),R.resolve()}else if(this._textContentStream){const v=()=>{this._reader.read().then(({value:P,done:A})=>{if(A){R.resolve();return}Object.assign(n,P.styles),this._processItems(P.items,n),v()},R.reject)};this._reader=this._textContentStream.getReader(),v()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');R.promise.then(()=>{n=null,k?this._renderTimer=setTimeout(()=>{p(this),this._renderTimer=null},k):p(this)},this._capability.reject)}expandTextDivs(k=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(b(this),this._bounds=null);const R=[],n=[];for(let a=0,v=this._textDivs.length;a<v;a++){const P=this._textDivs[a],A=this._textDivProperties.get(P);!A.hasText||(k?(R.length=0,n.length=0,A.originalTransform&&R.push(A.originalTransform),A.paddingTop>0?(n.push(`${A.paddingTop}px`),R.push(`translateY(${-A.paddingTop}px)`)):n.push(0),A.paddingRight>0?n.push(`${A.paddingRight/A.scale}px`):n.push(0),A.paddingBottom>0?n.push(`${A.paddingBottom}px`):n.push(0),A.paddingLeft>0?(n.push(`${A.paddingLeft/A.scale}px`),R.push(`translateX(${-A.paddingLeft/A.scale}px)`)):n.push(0),P.style.padding=n.join(" "),R.length&&(P.style.transform=R.join(" "))):(P.style.padding=null,P.style.transform=A.originalTransform))}}}function W(I){const k=new _({textContent:I.textContent,textContentStream:I.textContentStream,container:I.container,viewport:I.viewport,textDivs:I.textDivs,textContentItemsStr:I.textContentItemsStr,enhanceTextSelection:I.enhanceTextSelection});return k._render(I.timeout),k}},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var o=V(1),J=V(5),H=V(3);let Z=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};u.SVGGraphics=Z;{let w=function(n){let a=[];const v=[];for(const P of n){if(P.fn==="save"){a.push({fnId:92,fn:"group",items:[]}),v.push(a),a=a[a.length-1].items;continue}P.fn==="restore"?a=v.pop():a.push(P)}return a},_=function(n){if(Number.isInteger(n))return n.toString();const a=n.toFixed(10);let v=a.length-1;if(a[v]!=="0")return a;do v--;while(a[v]==="0");return a.substring(0,a[v]==="."?v:v+1)},W=function(n){if(n[4]===0&&n[5]===0){if(n[1]===0&&n[2]===0)return n[0]===1&&n[3]===1?"":`scale(${_(n[0])} ${_(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const a=Math.acos(n[0])*180/Math.PI;return`rotate(${_(a)})`}}else if(n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1)return`translate(${_(n[4])} ${_(n[5])})`;return`matrix(${_(n[0])} ${_(n[1])} ${_(n[2])} ${_(n[3])} ${_(n[4])} ${_(n[5])})`};const M={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},r="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",i=["butt","round","square"],p=["miter","round","bevel"],g=function(n,a="",v=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!v)return URL.createObjectURL(new Blob([n],{type:a}));const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let A=`data:${a};base64,`;for(let O=0,T=n.length;O<T;O+=3){const L=n[O]&255,G=n[O+1]&255,B=n[O+2]&255,z=L>>2,Y=(L&3)<<4|G>>4,X=O+1<T?(G&15)<<2|B>>6:64,f=O+2<T?B&63:64;A+=P[z]+P[Y]+P[X]+P[f]}return A},b=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),a=12,v=new Int32Array(256);for(let B=0;B<256;B++){let z=B;for(let Y=0;Y<8;Y++)z&1?z=3988292384^z>>1&2147483647:z=z>>1&2147483647;v[B]=z}function P(B,z,Y){let X=-1;for(let f=z;f<Y;f++){const s=(X^B[f])&255,e=v[s];X=X>>>8^e}return X^-1}function A(B,z,Y,X){let f=X;const s=z.length;Y[f]=s>>24&255,Y[f+1]=s>>16&255,Y[f+2]=s>>8&255,Y[f+3]=s&255,f+=4,Y[f]=B.charCodeAt(0)&255,Y[f+1]=B.charCodeAt(1)&255,Y[f+2]=B.charCodeAt(2)&255,Y[f+3]=B.charCodeAt(3)&255,f+=4,Y.set(z,f),f+=z.length;const e=P(Y,X+4,f);Y[f]=e>>24&255,Y[f+1]=e>>16&255,Y[f+2]=e>>8&255,Y[f+3]=e&255}function O(B,z,Y){let X=1,f=0;for(let s=z;s<Y;++s)X=(X+(B[s]&255))%65521,f=(f+X)%65521;return f<<16|X}function T(B){if(!H.isNodeJS)return L(B);try{let z;parseInt(process.versions.node)>=8?z=B:z=Buffer.from(B);const Y=require("zlib").deflateSync(z,{level:9});return Y instanceof Uint8Array?Y:new Uint8Array(Y)}catch(z){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+z)}return L(B)}function L(B){let z=B.length;const Y=65535,X=Math.ceil(z/Y),f=new Uint8Array(2+z+X*5+4);let s=0;f[s++]=120,f[s++]=156;let e=0;for(;z>Y;)f[s++]=0,f[s++]=255,f[s++]=255,f[s++]=0,f[s++]=0,f.set(B.subarray(e,e+Y),s),s+=Y,e+=Y,z-=Y;f[s++]=1,f[s++]=z&255,f[s++]=z>>8&255,f[s++]=~z&65535&255,f[s++]=(~z&65535)>>8&255,f.set(B.subarray(e),s),s+=B.length-e;const c=O(B,0,B.length);return f[s++]=c>>24&255,f[s++]=c>>16&255,f[s++]=c>>8&255,f[s++]=c&255,f}function G(B,z,Y,X){const f=B.width,s=B.height;let e,c,m;const y=B.data;switch(z){case o.ImageKind.GRAYSCALE_1BPP:c=0,e=1,m=f+7>>3;break;case o.ImageKind.RGB_24BPP:c=2,e=8,m=f*3;break;case o.ImageKind.RGBA_32BPP:c=6,e=8,m=f*4;break;default:throw new Error("invalid format")}const C=new Uint8Array((1+m)*s);let t=0,h=0;for(let N=0;N<s;++N)C[t++]=0,C.set(y.subarray(h,h+m),t),h+=m,t+=m;if(z===o.ImageKind.GRAYSCALE_1BPP&&X){t=0;for(let N=0;N<s;N++){t++;for(let q=0;q<m;q++)C[t++]^=255}}const S=new Uint8Array([f>>24&255,f>>16&255,f>>8&255,f&255,s>>24&255,s>>16&255,s>>8&255,s&255,e,c,0,0,0]),x=T(C),d=n.length+a*3+S.length+x.length,E=new Uint8Array(d);let D=0;return E.set(n,D),D+=n.length,A("IHDR",S,E,D),D+=a+S.length,A("IDATA",x,E,D),D+=a+x.length,A("IEND",new Uint8Array(0),E,D),g(E,"image/png",Y)}return function(z,Y,X){const f=z.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:z.kind;return G(z,f,Y,X)}}();class F{constructor(){this.fontSizeScale=1,this.fontWeight=M.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=M.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(a,v){this.x=a,this.y=v}}let I=0,k=0,R=0;u.SVGGraphics=Z=class{constructor(n,a,v=!1){this.svgFactory=new J.DOMSVGFactory,this.current=new F,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!v,this._operatorIdMapping=[];for(const P in o.OPS)this._operatorIdMapping[o.OPS[P]]=P}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const a=n.fnArray,v=n.argsArray;for(let P=0,A=a.length;P<A;P++)if(a[P]===o.OPS.dependency)for(const O of v[P]){const T=O.startsWith("g_")?this.commonObjs:this.objs,L=new Promise(G=>{T.get(O,G)});this.current.dependencies.push(L)}return Promise.all(this.current.dependencies)}transform(n,a,v,P,A,O){const T=[n,a,v,P,A,O];this.transformMatrix=o.Util.transform(this.transformMatrix,T),this.tgrp=null}getSVG(n,a){this.viewport=a;const v=this._initialize(a);return this.loadDependencies(n).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),v))}convertOpList(n){const a=this._operatorIdMapping,v=n.argsArray,P=n.fnArray,A=[];for(let O=0,T=P.length;O<T;O++){const L=P[O];A.push({fnId:L,fn:a[L],args:v[O]})}return w(A)}executeOpTree(n){for(const a of n){const v=a.fn,P=a.fnId,A=a.args;switch(P|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(A);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(A[0],A[1]);break;case o.OPS.setFont:this.setFont(A);break;case o.OPS.showText:this.showText(A[0]);break;case o.OPS.showSpacedText:this.showText(A[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(A[0],A[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(A[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(A[0]);break;case o.OPS.setHScale:this.setHScale(A[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(A[0],A[1],A[2],A[3],A[4],A[5]);break;case o.OPS.setTextRise:this.setTextRise(A[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(A[0]);break;case o.OPS.setLineWidth:this.setLineWidth(A[0]);break;case o.OPS.setLineJoin:this.setLineJoin(A[0]);break;case o.OPS.setLineCap:this.setLineCap(A[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(A[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(A[0],A[1],A[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(A[0],A[1],A[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(A);break;case o.OPS.setFillColorN:this.setFillColorN(A);break;case o.OPS.shadingFill:this.shadingFill(A[0]);break;case o.OPS.setDash:this.setDash(A[0],A[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(A[0]);break;case o.OPS.setFlatness:this.setFlatness(A[0]);break;case o.OPS.setGState:this.setGState(A[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(A[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(A[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(A[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(A[0],A[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(A[0],A[1],A[2],A[3],A[4],A[5]);break;case o.OPS.constructPath:this.constructPath(A[0],A[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,o.warn)(`Unimplemented operator ${v}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,a,v,P,A,O){const T=this.current;T.textMatrix=T.lineMatrix=[n,a,v,P,A,O],T.textMatrixScale=Math.hypot(n,a),T.x=T.lineX=0,T.y=T.lineY=0,T.xcoords=[],T.ycoords=[],T.tspan=this.svgFactory.createElement("svg:tspan"),T.tspan.setAttributeNS(null,"font-family",T.fontFamily),T.tspan.setAttributeNS(null,"font-size",`${_(T.fontSize)}px`),T.tspan.setAttributeNS(null,"y",_(-T.y)),T.txtElement=this.svgFactory.createElement("svg:text"),T.txtElement.appendChild(T.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=o.IDENTITY_MATRIX,n.lineMatrix=o.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,a){const v=this.current;v.x=v.lineX+=n,v.y=v.lineY+=a,v.xcoords=[],v.ycoords=[],v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${_(v.fontSize)}px`),v.tspan.setAttributeNS(null,"y",_(-v.y))}showText(n){const a=this.current,v=a.font,P=a.fontSize;if(P===0)return;const A=a.fontSizeScale,O=a.charSpacing,T=a.wordSpacing,L=a.fontDirection,G=a.textHScale*L,B=v.vertical,z=B?1:-1,Y=v.defaultVMetrics,X=P*a.fontMatrix[0];let f=0;for(const c of n){if(c===null){f+=L*T;continue}else if(typeof c=="number"){f+=z*c*P/1e3;continue}const m=(c.isSpace?T:0)+O,y=c.fontChar;let C,t,h=c.width;if(B){let x;const d=c.vmetric||Y;x=c.vmetric?d[1]:h*.5,x=-x*X;const E=d[2]*X;h=d?-d[0]:h,C=x/A,t=(f+E)/A}else C=f/A,t=0;(c.isInFont||v.missingFile)&&(a.xcoords.push(a.x+C),B&&a.ycoords.push(-a.y+t),a.tspan.textContent+=y);let S;B?S=h*X-m*L:S=h*X+m*L,f+=S}a.tspan.setAttributeNS(null,"x",a.xcoords.map(_).join(" ")),B?a.tspan.setAttributeNS(null,"y",a.ycoords.map(_).join(" ")):a.tspan.setAttributeNS(null,"y",_(-a.y)),B?a.y-=f:a.x+=f*G,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${_(a.fontSize)}px`),a.fontStyle!==M.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==M.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const s=a.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(s===o.TextRenderingMode.FILL||s===o.TextRenderingMode.FILL_STROKE?(a.fillColor!==M.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),s===o.TextRenderingMode.STROKE||s===o.TextRenderingMode.FILL_STROKE){const c=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,c)}let e=a.textMatrix;a.textRise!==0&&(e=e.slice(),e[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${W(e)} scale(${_(G)}, -1)`),a.txtElement.setAttributeNS(r,"xml:space","preserve"),a.txtElement.appendChild(a.tspan),a.txtgrp.appendChild(a.txtElement),this._ensureTransformGroup().appendChild(a.txtElement)}setLeadingMoveText(n,a){this.setLeading(-a),this.moveText(n,a)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const a=g(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${a}); }
`}setFont(n){const a=this.current,v=this.commonObjs.get(n[0]);let P=n[1];a.font=v,this.embedFonts&&!v.missingFile&&!this.embeddedFonts[v.loadedName]&&(this.addFontStyle(v),this.embeddedFonts[v.loadedName]=v),a.fontMatrix=v.fontMatrix||o.FONT_IDENTITY_MATRIX;let A="normal";v.black?A="900":v.bold&&(A="bold");const O=v.italic?"italic":"normal";P<0?(P=-P,a.fontDirection=-1):a.fontDirection=1,a.fontSize=P,a.fontFamily=v.loadedName,a.fontWeight=A,a.fontStyle=O,a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"y",_(-a.y)),a.xcoords=[],a.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement?.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=i[n]}setLineJoin(n){this.current.lineJoin=p[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,a,v){this.current.strokeColor=o.Util.makeHexColor(n,a,v)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,a,v){this.current.fillColor=o.Util.makeHexColor(n,a,v),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const a=this.viewport.width,v=this.viewport.height,P=o.Util.inverseTransform(this.transformMatrix),A=o.Util.applyTransform([0,0],P),O=o.Util.applyTransform([0,v],P),T=o.Util.applyTransform([a,0],P),L=o.Util.applyTransform([a,v],P),G=Math.min(A[0],O[0],T[0],L[0]),B=Math.min(A[1],O[1],T[1],L[1]),z=Math.max(A[0],O[0],T[0],L[0]),Y=Math.max(A[1],O[1],T[1],L[1]),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",G),X.setAttributeNS(null,"y",B),X.setAttributeNS(null,"width",z-G),X.setAttributeNS(null,"height",Y-B),X.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&X.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(X)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const a=n[1],v=n[2],P=n[3]||o.IDENTITY_MATRIX,[A,O,T,L]=n[4],G=n[5],B=n[6],z=n[7],Y=`shading${R++}`,[X,f,s,e]=o.Util.normalizeRect([...o.Util.applyTransform([A,O],P),...o.Util.applyTransform([T,L],P)]),[c,m]=o.Util.singularValueDecompose2dScale(P),y=G*c,C=B*m,t=this.svgFactory.createElement("svg:pattern");t.setAttributeNS(null,"id",Y),t.setAttributeNS(null,"patternUnits","userSpaceOnUse"),t.setAttributeNS(null,"width",y),t.setAttributeNS(null,"height",C),t.setAttributeNS(null,"x",`${X}`),t.setAttributeNS(null,"y",`${f}`);const h=this.svg,S=this.transformMatrix,x=this.current.fillColor,d=this.current.strokeColor,E=this.svgFactory.create(s-X,e-f);if(this.svg=E,this.transformMatrix=P,z===2){const D=o.Util.makeHexColor(...a);this.current.fillColor=D,this.current.strokeColor=D}return this.executeOpTree(this.convertOpList(v)),this.svg=h,this.transformMatrix=S,this.current.fillColor=x,this.current.strokeColor=d,t.appendChild(E.childNodes[0]),this.defs.appendChild(t),`url(#${Y})`}_makeShadingPattern(n){switch(typeof n=="string"&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const a=`shading${R++}`,v=n[3];let P;switch(n[1]){case"axial":const A=n[4],O=n[5];P=this.svgFactory.createElement("svg:linearGradient"),P.setAttributeNS(null,"id",a),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"x1",A[0]),P.setAttributeNS(null,"y1",A[1]),P.setAttributeNS(null,"x2",O[0]),P.setAttributeNS(null,"y2",O[1]);break;case"radial":const T=n[4],L=n[5],G=n[6],B=n[7];P=this.svgFactory.createElement("svg:radialGradient"),P.setAttributeNS(null,"id",a),P.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),P.setAttributeNS(null,"cx",L[0]),P.setAttributeNS(null,"cy",L[1]),P.setAttributeNS(null,"r",B),P.setAttributeNS(null,"fx",T[0]),P.setAttributeNS(null,"fy",T[1]),P.setAttributeNS(null,"fr",G);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const A of v){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",A[0]),O.setAttributeNS(null,"stop-color",A[1]),P.appendChild(O)}return this.defs.appendChild(P),`url(#${a})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,a){this.current.dashArray=n,this.current.dashPhase=a}constructPath(n,a){const v=this.current;let P=v.x,A=v.y,O=[],T=0;for(const L of n)switch(L|0){case o.OPS.rectangle:P=a[T++],A=a[T++];const G=a[T++],B=a[T++],z=P+G,Y=A+B;O.push("M",_(P),_(A),"L",_(z),_(A),"L",_(z),_(Y),"L",_(P),_(Y),"Z");break;case o.OPS.moveTo:P=a[T++],A=a[T++],O.push("M",_(P),_(A));break;case o.OPS.lineTo:P=a[T++],A=a[T++],O.push("L",_(P),_(A));break;case o.OPS.curveTo:P=a[T+4],A=a[T+5],O.push("C",_(a[T]),_(a[T+1]),_(a[T+2]),_(a[T+3]),_(P),_(A)),T+=6;break;case o.OPS.curveTo2:O.push("C",_(P),_(A),_(a[T]),_(a[T+1]),_(a[T+2]),_(a[T+3])),P=a[T+2],A=a[T+3],T+=4;break;case o.OPS.curveTo3:P=a[T+2],A=a[T+3],O.push("C",_(a[T]),_(a[T+1]),_(P),_(A),_(P),_(A)),T+=4;break;case o.OPS.closePath:O.push("Z");break}O=O.join(" "),v.path&&n.length>0&&n[0]!==o.OPS.rectangle&&n[0]!==o.OPS.moveTo?O=v.path.getAttributeNS(null,"d")+O:(v.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(v.path)),v.path.setAttributeNS(null,"d",O),v.path.setAttributeNS(null,"fill","none"),v.element=v.path,v.setCurrentPoint(P,A)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const a=`clippath${I++}`,v=this.svgFactory.createElement("svg:clipPath");v.setAttributeNS(null,"id",a),v.setAttributeNS(null,"transform",W(this.transformMatrix));const P=n.element.cloneNode(!0);if(this.pendingClip==="evenodd"?P.setAttributeNS(null,"clip-rule","evenodd"):P.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,v.appendChild(P),this.defs.appendChild(v),n.activeClipUrl){n.clipGroup=null;for(const A of this.extraStack)A.clipGroup=null;v.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${a})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const a=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",a)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[a,v]of n)switch(a){case"LW":this.setLineWidth(v);break;case"LC":this.setLineCap(v);break;case"LJ":this.setLineJoin(v);break;case"ML":this.setMiterLimit(v);break;case"D":this.setDash(v[0],v[1]);break;case"RI":this.setRenderingIntent(v);break;case"FL":this.setFlatness(v);break;case"Font":this.setFont(v);break;case"CA":this.setStrokeAlpha(v);break;case"ca":this.setFillAlpha(v);break;default:(0,o.warn)(`Unimplemented graphic state operator ${a}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,a=1){const v=this.current;let P=v.dashArray;a!==1&&P.length>0&&(P=P.map(function(A){return a*A})),n.setAttributeNS(null,"stroke",v.strokeColor),n.setAttributeNS(null,"stroke-opacity",v.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",_(v.miterLimit)),n.setAttributeNS(null,"stroke-linecap",v.lineCap),n.setAttributeNS(null,"stroke-linejoin",v.lineJoin),n.setAttributeNS(null,"stroke-width",_(a*v.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",P.map(_).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",_(a*v.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const a=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);if(!a){(0,o.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(a)}paintInlineImageXObject(n,a){const v=n.width,P=n.height,A=b(n,this.forceDataSchema,!!a),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",_(v)),O.setAttributeNS(null,"height",_(P)),this.current.element=O,this.clip("nonzero");const T=this.svgFactory.createElement("svg:image");T.setAttributeNS(l,"xlink:href",A),T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y",_(-P)),T.setAttributeNS(null,"width",_(v)+"px"),T.setAttributeNS(null,"height",_(P)+"px"),T.setAttributeNS(null,"transform",`scale(${_(1/v)} ${_(-1/P)})`),a?a.appendChild(T):this._ensureTransformGroup().appendChild(T)}paintImageMaskXObject(n){const a=this.current,v=n.width,P=n.height,A=a.fillColor;a.maskId=`mask${k++}`;const O=this.svgFactory.createElement("svg:mask");O.setAttributeNS(null,"id",a.maskId);const T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width",_(v)),T.setAttributeNS(null,"height",_(P)),T.setAttributeNS(null,"fill",A),T.setAttributeNS(null,"mask",`url(#${a.maskId})`),this.defs.appendChild(O),this._ensureTransformGroup().appendChild(T),this.paintInlineImageXObject(n,O)}paintFormXObjectBegin(n,a){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),a){const v=a[2]-a[0],P=a[3]-a[1],A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x",a[0]),A.setAttributeNS(null,"y",a[1]),A.setAttributeNS(null,"width",_(v)),A.setAttributeNS(null,"height",_(P)),this.current.element=A,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const a=this.svgFactory.create(n.width,n.height),v=this.svgFactory.createElement("svg:defs");a.appendChild(v),this.defs=v;const P=this.svgFactory.createElement("svg:g");return P.setAttributeNS(null,"transform",W(n.transform)),a.appendChild(P),this.svg=P,a}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",W(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var o=V(1),J=V(24);const H=require$$4,Z=require$$4,M=require$$4,r=require$$4,l=/^file:\/\/\/[a-zA-Z]:\//;function i(k){const R=r.parse(k);return R.protocol==="file:"||R.host?R:/^[a-z]:[/\\]/i.test(k)?r.parse(`file:///${k}`):(R.host||(R.protocol="file:"),R)}class p{constructor(R){this.source=R,this.url=i(R.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&R.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new W(this):new w(this),this._fullRequestReader}getRangeReader(R,n){if(n<=this._progressiveDataLength)return null;const a=this.isFsUrl?new I(this,R,n):new _(this,R,n);return this._rangeRequestReaders.push(a),a}cancelAllRequests(R){this._fullRequestReader&&this._fullRequestReader.cancel(R);for(const n of this._rangeRequestReaders.slice(0))n.cancel(R)}}u.PDFNodeStream=p;class g{constructor(R){this._url=R.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=R.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const R=this._readableStream.read();return R===null?(this._readCapability=(0,o.createPromiseCapability)(),this.read()):(this._loaded+=R.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(R).buffer,done:!1})}cancel(R){if(!this._readableStream){this._error(R);return}this._readableStream.destroy(R)}_error(R){this._storedError=R,this._readCapability.resolve()}_setReadableStream(R){this._readableStream=R,R.on("readable",()=>{this._readCapability.resolve()}),R.on("end",()=>{R.destroy(),this._done=!0,this._readCapability.resolve()}),R.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(R){this._url=R.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();const n=R.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const R=this._readableStream.read();return R===null?(this._readCapability=(0,o.createPromiseCapability)(),this.read()):(this._loaded+=R.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(R).buffer,done:!1})}cancel(R){if(!this._readableStream){this._error(R);return}this._readableStream.destroy(R)}_error(R){this._storedError=R,this._readCapability.resolve()}_setReadableStream(R){this._readableStream=R,R.on("readable",()=>{this._readCapability.resolve()}),R.on("end",()=>{R.destroy(),this._done=!0,this._readCapability.resolve()}),R.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function F(k,R){return{protocol:k.protocol,auth:k.auth,host:k.hostname,port:k.port,path:k.path,method:"GET",headers:R}}class w extends g{constructor(R){super(R);const n=a=>{if(a.statusCode===404){const O=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=O,this._headersCapability.reject(O);return}this._headersCapability.resolve(),this._setReadableStream(a);const v=O=>this._readableStream.headers[O.toLowerCase()],{allowRangeRequests:P,suggestedLength:A}=(0,J.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:R.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=A||this._contentLength,this._filename=(0,J.extractFilenameFromHeader)(v)};this._request=null,this._url.protocol==="http:"?this._request=Z.request(F(this._url,R.httpHeaders),n):this._request=M.request(F(this._url,R.httpHeaders),n),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class _ extends b{constructor(R,n,a){super(R);this._httpHeaders={};for(const P in R.httpHeaders){const A=R.httpHeaders[P];typeof A>"u"||(this._httpHeaders[P]=A)}this._httpHeaders.Range=`bytes=${n}-${a-1}`;const v=P=>{if(P.statusCode===404){const A=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A;return}this._setReadableStream(P)};this._request=null,this._url.protocol==="http:"?this._request=Z.request(F(this._url,this._httpHeaders),v):this._request=M.request(F(this._url,this._httpHeaders),v),this._request.on("error",P=>{this._storedError=P}),this._request.end()}}class W extends g{constructor(R){super(R);let n=decodeURIComponent(this._url.path);l.test(this._url.href)&&(n=n.replace(/^\//,"")),H.lstat(n,(a,v)=>{if(a){a.code==="ENOENT"&&(a=new o.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=a,this._headersCapability.reject(a);return}this._contentLength=v.size,this._setReadableStream(H.createReadStream(n)),this._headersCapability.resolve()})}}class I extends b{constructor(R,n,a){super(R);let v=decodeURIComponent(this._url.path);l.test(this._url.href)&&(v=v.replace(/^\//,"")),this._setReadableStream(H.createReadStream(v,{start:n,end:a-1}))}}},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=r,u.extractFilenameFromHeader=M,u.validateRangeRequestCapabilities=Z,u.validateResponseStatus=l;var o=V(1),J=V(25),H=V(5);function Z({getResponseHeader:i,isHttp:p,rangeChunkSize:g,disableRange:b}){(0,o.assert)(g>0,"Range chunk size must be larger than zero");const F={allowRangeRequests:!1,suggestedLength:void 0},w=parseInt(i("Content-Length"),10);return!Number.isInteger(w)||(F.suggestedLength=w,w<=2*g)||b||!p||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(F.allowRangeRequests=!0),F}function M(i){const p=i("Content-Disposition");if(p){let g=(0,J.getFilenameFromContentDispositionHeader)(p);if(g.includes("%"))try{g=decodeURIComponent(g)}catch{}if((0,H.isPdfFile)(g))return g}return null}function r(i,p){return i===404||i===0&&p.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+p+'".'):new o.UnexpectedResponseException(`Unexpected server response (${i}) while retrieving PDF "${p}".`,i)}function l(i){return i===200||i===206}},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=J;var o=V(1);function J(H){let Z=!0,M=r("filename\\*","i").exec(H);if(M){M=M[1];let w=g(M);return w=unescape(w),w=b(w),w=F(w),i(w)}if(M=p(H),M){const w=F(M);return i(w)}if(M=r("filename","i").exec(H),M){M=M[1];let w=g(M);return w=F(w),i(w)}function r(w,_){return new RegExp("(?:^|;)\\s*"+w+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function l(w,_){if(w){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const W=new TextDecoder(w,{fatal:!0}),I=(0,o.stringToBytes)(_);_=W.decode(I),Z=!1}catch{}}return _}function i(w){return Z&&/[\x80-\xff]/.test(w)&&(w=l("utf-8",w),Z&&(w=l("iso-8859-1",w))),w}function p(w){const _=[];let W;const I=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(W=I.exec(w))!==null;){let[,R,n,a]=W;if(R=parseInt(R,10),R in _){if(R===0)break;continue}_[R]=[n,a]}const k=[];for(let R=0;R<_.length&&R in _;++R){let[n,a]=_[R];a=g(a),n&&(a=unescape(a),R===0&&(a=b(a))),k.push(a)}return k.join("")}function g(w){if(w.startsWith('"')){const _=w.slice(1).split('\\"');for(let W=0;W<_.length;++W){const I=_[W].indexOf('"');I!==-1&&(_[W]=_[W].slice(0,I),_.length=W+1),_[W]=_[W].replace(/\\(.)/g,"$1")}w=_.join('"')}return w}function b(w){const _=w.indexOf("'");if(_===-1)return w;const W=w.slice(0,_),k=w.slice(_+1).replace(/^[^']*'/,"");return l(W,k)}function F(w){return!w.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(w)?w:w.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,W,I,k){if(I==="q"||I==="Q")return k=k.replace(/_/g," "),k=k.replace(/=([0-9a-fA-F]{2})/g,function(R,n){return String.fromCharCode(parseInt(n,16))}),l(W,k);try{k=atob(k)}catch{}return l(W,k)})}return""}},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var o=V(1),J=V(24);const H=200,Z=206;function M(g){const b=g.response;return typeof b!="string"?b:(0,o.stringToBytes)(b).buffer}class r{constructor(b,F={}){this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&F.httpHeaders||Object.create(null),this.withCredentials=F.withCredentials||!1,this.getXhr=F.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,F,w){const _={begin:b,end:F};for(const W in w)_[W]=w[W];return this.request(_)}requestFull(b){return this.request(b)}request(b){const F=this.getXhr(),w=this.currXhrId++,_=this.pendingRequests[w]={xhr:F};F.open("GET",this.url),F.withCredentials=this.withCredentials;for(const W in this.httpHeaders){const I=this.httpHeaders[W];typeof I>"u"||F.setRequestHeader(W,I)}return this.isHttp&&"begin"in b&&"end"in b?(F.setRequestHeader("Range",`bytes=${b.begin}-${b.end-1}`),_.expectedStatus=Z):_.expectedStatus=H,F.responseType="arraybuffer",b.onError&&(F.onerror=function(W){b.onError(F.status)}),F.onreadystatechange=this.onStateChange.bind(this,w),F.onprogress=this.onProgress.bind(this,w),_.onHeadersReceived=b.onHeadersReceived,_.onDone=b.onDone,_.onError=b.onError,_.onProgress=b.onProgress,F.send(null),w}onProgress(b,F){const w=this.pendingRequests[b];!w||w.onProgress?.(F)}onStateChange(b,F){const w=this.pendingRequests[b];if(!w)return;const _=w.xhr;if(_.readyState>=2&&w.onHeadersReceived&&(w.onHeadersReceived(),delete w.onHeadersReceived),_.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],_.status===0&&this.isHttp){w.onError?.(_.status);return}const W=_.status||H;if(!(W===H&&w.expectedStatus===Z)&&W!==w.expectedStatus){w.onError?.(_.status);return}const k=M(_);if(W===Z){const R=_.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(R);w.onDone({begin:parseInt(n[1],10),chunk:k})}else k?w.onDone({begin:0,chunk:k}):w.onError?.(_.status)}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const F=this.pendingRequests[b].xhr;delete this.pendingRequests[b],F.abort()}}class l{constructor(b){this._source=b,this._manager=new r(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const F=this._rangeRequestReaders.indexOf(b);F>=0&&this._rangeRequestReaders.splice(F,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new i(this._manager,this._source),this._fullRequestReader}getRangeReader(b,F){const w=new p(this._manager,b,F);return w.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(w),w}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const F of this._rangeRequestReaders.slice(0))F.cancel(b)}}u.PDFNetworkStream=l;class i{constructor(b,F){this._manager=b;const w={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=F.url,this._fullRequestId=b.requestFull(w),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=F.disableRange||!1,this._contentLength=F.length,this._rangeChunkSize=F.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,F=this._manager.getRequestXhr(b),w=I=>F.getResponseHeader(I),{allowRangeRequests:_,suggestedLength:W}=(0,J.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=W||this._contentLength,this._filename=(0,J.extractFilenameFromHeader)(w),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,J.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){this.onProgress?.({loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=(0,o.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class p{constructor(b,F,w){this._manager=b;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(F,w,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(b){const F=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:F,done:!1}):this._queuedChunk=F,this._done=!0;for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,J.createResponseStatusError)(b,this._url);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){this.isStreamingSupported||this.onProgress?.({loaded:b.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const F=this._queuedChunk;return this._queuedChunk=null,{value:F,done:!1}}if(this._done)return{value:void 0,done:!0};const b=(0,o.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(et,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var o=V(1),J=V(24);function H(i,p,g){return{method:"GET",headers:i,signal:g?.signal,mode:"cors",credentials:p?"include":"same-origin",redirect:"follow"}}function Z(i){const p=new Headers;for(const g in i){const b=i[g];typeof b>"u"||p.append(g,b)}return p}class M{constructor(p){this.source=p,this.isHttp=/^https?:/i.test(p.url),this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new r(this),this._fullRequestReader}getRangeReader(p,g){if(g<=this._progressiveDataLength)return null;const b=new l(this,p,g);return this._rangeRequestReaders.push(b),b}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(const g of this._rangeRequestReaders.slice(0))g.cancel(p)}}u.PDFFetchStream=M;class r{constructor(p){this._stream=p,this._reader=null,this._loaded=0,this._filename=null;const g=p.source;this._withCredentials=g.withCredentials||!1,this._contentLength=g.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._headers=Z(this._stream.httpHeaders);const b=g.url;fetch(b,H(this._headers,this._withCredentials,this._abortController)).then(F=>{if(!(0,J.validateResponseStatus)(F.status))throw(0,J.createResponseStatusError)(F.status,b);this._reader=F.body.getReader(),this._headersCapability.resolve();const w=I=>F.headers.get(I),{allowRangeRequests:_,suggestedLength:W}=(0,J.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=W||this._contentLength,this._filename=(0,J.extractFilenameFromHeader)(w),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:p,done:g}=await this._reader.read();return g?{value:p,done:g}:(this._loaded+=p.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){this._reader&&this._reader.cancel(p),this._abortController&&this._abortController.abort()}}class l{constructor(p,g,b){this._stream=p,this._reader=null,this._loaded=0;const F=p.source;this._withCredentials=F.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!F.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=Z(this._stream.httpHeaders),this._headers.append("Range",`bytes=${g}-${b-1}`);const w=F.url;fetch(w,H(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,J.validateResponseStatus)(_.status))throw(0,J.createResponseStatusError)(_.status,w);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:p,done:g}=await this._reader.read();return g?{value:p,done:g}:(this._loaded+=p.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){this._reader&&this._reader.cancel(p),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(et){var u=__webpack_module_cache__[et];if(u!==void 0)return u.exports;var V=__webpack_module_cache__[et]={exports:{}};return __webpack_modules__[et](V,V.exports,__w_pdfjs_require__),V.exports}var __webpack_exports__={};return(()=>{var et=__webpack_exports__;Object.defineProperty(et,"__esModule",{value:!0}),Object.defineProperty(et,"AnnotationLayer",{enumerable:!0,get:function(){return J.AnnotationLayer}}),Object.defineProperty(et,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(et,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(et,"GlobalWorkerOptions",{enumerable:!0,get:function(){return H.GlobalWorkerOptions}}),Object.defineProperty(et,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(et,"LoopbackPort",{enumerable:!0,get:function(){return V.LoopbackPort}}),Object.defineProperty(et,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(et,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(et,"PDFDataRangeTransport",{enumerable:!0,get:function(){return V.PDFDataRangeTransport}}),Object.defineProperty(et,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(et,"PDFWorker",{enumerable:!0,get:function(){return V.PDFWorker}}),Object.defineProperty(et,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(et,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(et,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(et,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(et,"SVGGraphics",{enumerable:!0,get:function(){return r.SVGGraphics}}),Object.defineProperty(et,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return u.UNSUPPORTED_FEATURES}}),Object.defineProperty(et,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(et,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(et,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(et,"XfaLayer",{enumerable:!0,get:function(){return l.XfaLayer}}),Object.defineProperty(et,"build",{enumerable:!0,get:function(){return V.build}}),Object.defineProperty(et,"createPromiseCapability",{enumerable:!0,get:function(){return u.createPromiseCapability}}),Object.defineProperty(et,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(et,"getDocument",{enumerable:!0,get:function(){return V.getDocument}}),Object.defineProperty(et,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(et,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(et,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(et,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(et,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(et,"renderTextLayer",{enumerable:!0,get:function(){return M.renderTextLayer}}),Object.defineProperty(et,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(et,"version",{enumerable:!0,get:function(){return V.version}});var u=__w_pdfjs_require__(1),V=__w_pdfjs_require__(4),o=__w_pdfjs_require__(5),J=__w_pdfjs_require__(18),H=__w_pdfjs_require__(12),Z=__w_pdfjs_require__(3),M=__w_pdfjs_require__(21),r=__w_pdfjs_require__(22),l=__w_pdfjs_require__(20);if(Z.isNodeJS){const{PDFNodeStream:i}=__w_pdfjs_require__(23);(0,V.setPDFNetworkStreamFactory)(p=>new i(p))}else{const{PDFNetworkStream:i}=__w_pdfjs_require__(26),{PDFFetchStream:p}=__w_pdfjs_require__(27);(0,V.setPDFNetworkStreamFactory)(g=>(0,o.isValidFetchUrl)(g.url)?new p(g):new i(g))}})(),__webpack_exports__})()})})(pdf);var pdfReader_vue_vue_type_style_index_0_scoped_true_lang="";pdf.exports.GlobalWorkerOptions.workerSrc="/pdf.worker.js";const _sfc_main=defineComponent({props:{file:String},setup(et){const{file:u}=toRefs(et),V=o=>{pdf.exports.getDocument(o).promise.then(H=>{const Z=document.getElementById("canvas1");H.getPage(1).then(M=>{const r=M.getViewport({scale:1.4}),l=window.devicePixelRatio||1,i=Z.getContext("2d");Z.width=Math.floor(r.width*l),Z.height=Math.floor(r.height*l),Z.style.width=Math.floor(r.width)+"px",Z.style.height=Math.floor(r.height)+"px";const g={canvasContext:i,transform:l!==1?[l,0,0,l,0,0]:null,viewport:r};M.render(g)})})};watch(u,(o,J)=>{V(o)}),onMounted(()=>{V(u.value)})}}),_withScopeId=et=>(pushScopeId("data-v-7f6a2734"),et=et(),popScopeId(),et),_hoisted_1={style:{width:"100%","text-align":"center"},class:"pdf"},_hoisted_2=_withScopeId(()=>createBaseVNode("canvas",{id:"canvas1"},null,-1)),_hoisted_3=[_hoisted_2];function _sfc_render(et,u,V,o,J,H){return openBlock(),createElementBlock("div",_hoisted_1,_hoisted_3)}var pdfReader=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-7f6a2734"]]);export{pdfReader as default};
